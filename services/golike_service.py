import base64
exec(base64.b64decode('aW1wb3J0IHRpbWUKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IGpzb24KaW1wb3J0IHJlcXVlc3RzCmZyb20gdHlwaW5nIGltcG9ydCBEaWN0LCBBbnksIE9wdGlvbmFsLCBMaXN0CmltcG9ydCBjb25maWcKaW1wb3J0IHV0aWxzCmZyb20gdXRpbHMgaW1wb3J0IExvZ0xldmVsLCBMb2dnZXIKCiMgVOG6oW8gbG9nZ2VyIHJpw6puZyBjaG8gR29MaWtlU2VydmljZQpsb2dnZXIgPSB1dGlscy5nZXRfbG9nZ2VyKCJHb0xpa2VTZXJ2aWNlIikKCiMgS2nhu4NtIHRyYSB2w6AgaW1wb3J0IGPDoWMgdGjGsCB2aeG7h24gY+G6p24gdGhp4bq/dAp0cnk6CiAgICBpbXBvcnQgcHljaHJvbWUKICAgIFBZQ0hST01FX0FWQUlMQUJMRSA9IFRydWUKZXhjZXB0IEltcG9ydEVycm9yOgogICAgbG9nZ2VyLndhcm5pbmcoIlRoxrAgdmnhu4duIHB5Y2hyb21lIGtow7RuZyBraOG6oyBk4bulbmcuIEjDo3kgY8OgaSDEkeG6t3QgYuG6sW5nIGzhu4duaDogcGlwIGluc3RhbGwgcHljaHJvbWUiKQogICAgUFlDSFJPTUVfQVZBSUxBQkxFID0gRmFsc2UKCnRyeToKICAgIGltcG9ydCBjbG91ZHNjcmFwZXIKICAgIENMT1VEU0NSQVBFUl9BVkFJTEFCTEUgPSBUcnVlCmV4Y2VwdCBJbXBvcnRFcnJvcjoKICAgIGxvZ2dlci53YXJuaW5nKCJUaMawIHZp4buHbiBjbG91ZHNjcmFwZXIga2jDtG5nIGto4bqjIGThu6VuZy4gSMOjeSBjw6BpIMSR4bq3dCBi4bqxbmcgbOG7h25oOiBwaXAgaW5zdGFsbCBjbG91ZHNjcmFwZXIiKQogICAgQ0xPVURTQ1JBUEVSX0FWQUlMQUJMRSA9IEZhbHNlCgp0cnk6CiAgICBpbXBvcnQgY3VybF9jZmZpCiAgICBmcm9tIGN1cmxfY2ZmaSBpbXBvcnQgcmVxdWVzdHMgYXMgY3VybF9yZXF1ZXN0cwogICAgQ1VSTF9DRkZJX0FWQUlMQUJMRSA9IFRydWUKZXhjZXB0IEltcG9ydEVycm9yOgogICAgbG9nZ2VyLndhcm5pbmcoIlRoxrAgdmnhu4duIGN1cmxfY2ZmaSBraMO0bmcga2jhuqMgZOG7pW5nLiBIw6N5IGPDoGkgxJHhurd0IGLhurFuZyBs4buHbmg6IHBpcCBpbnN0YWxsIGN1cmwtY2ZmaSIpCiAgICBDVVJMX0NGRklfQVZBSUxBQkxFID0gRmFsc2UKCmNsYXNzIEJyb3dzZXI6CiAgICAiIiIKICAgIEzhu5twIGdp4bqjIGzhuq1wIEJyb3dzZXIgY+G7p2EgcHljaHJvbWUgbuG6v3UgdGjGsCB2aeG7h24ga2jDtG5nIGto4bqjIGThu6VuZwogICAgIiIiCiAgICBkZWYgX19pbml0X18oc2VsZiwgdXJsKToKICAgICAgICBzZWxmLnVybCA9IHVybAogICAgICAgIAogICAgZGVmIGxpc3RfdGFiKHNlbGYpOgogICAgICAgIHJldHVybiBbXQogICAgICAgIAogICAgZGVmIG5ld190YWIoc2VsZik6CiAgICAgICAgcmV0dXJuIE5vbmUKCmNsYXNzIEdvTGlrZVNlcnZpY2U6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZGJfc2VydmljZSwgaGVscGVyX3NlcnZpY2UpOgogICAgICAgICIiIgogICAgICAgIEto4bufaSB04bqhbyBHb0xpa2UgU2VydmljZQogICAgICAgIAogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGRiX3NlcnZpY2U6IERhdGFiYXNlIHNlcnZpY2UgxJHhu4MgbMawdSB0aMO0bmcgdGluCiAgICAgICAgICAgIGhlbHBlcl9zZXJ2aWNlOiBIZWxwZXIgc2VydmljZSDEkeG7gyB0xrDGoW5nIHTDoWMgduG7m2kgdGhp4bq/dCBi4buLCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5kYiA9IGRiX3NlcnZpY2UKICAgICAgICBzZWxmLmhlbHBlciA9IGhlbHBlcl9zZXJ2aWNlCiAgICAgICAgCiAgICAgICAgIyBD4bqldSBow6xuaCBjaG8gQVBJIHJlcXVlc3RzCiAgICAgICAgc2VsZi51c2VyX2FnZW50ID0gIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgSykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzExNC4wLjAuMCBNb2JpbGUgU2FmYXJpLzUzNy4zNiIKICAgICAgICAKICAgICAgICAjIFF1eeG6v3QgxJHhu4tuaCBz4butIGThu6VuZyBjdXJsX2NmZmkgaGF5IGNsb3Vkc2NyYXBlcgogICAgICAgICMgVHLDqm4gVGVybXV4IHRoxrDhu51uZyBz4butIGThu6VuZyBjbG91ZHNjcmFwZXIgZG8gY3VybF9jZmZpIGPDsyB0aOG7gyBraMO0bmcgdMawxqFuZyB0aMOtY2gKICAgICAgICAjIGlzX3Rlcm11eCA9IHNlbGYuX2NoZWNrX2lzX3Rlcm11eCgpCiAgICAgICAgc2VsZi51c2VfY3VybF9jZmZpID0gQ1VSTF9DRkZJX0FWQUlMQUJMRQogICAgICAgIAogICAgICAgICMgS2jhu59pIHThuqFvIGNsaWVudAogICAgICAgIGlmIG5vdCBzZWxmLnVzZV9jdXJsX2NmZmkgYW5kIENMT1VEU0NSQVBFUl9BVkFJTEFCTEU6CiAgICAgICAgICAgIHNlbGYuY2xpZW50ID0gY2xvdWRzY3JhcGVyLmNyZWF0ZV9zY3JhcGVyKAogICAgICAgICAgICAgICAgYnJvd3Nlcj17CiAgICAgICAgICAgICAgICAgICAgJ2Jyb3dzZXInOiAnY2hyb21lJywKICAgICAgICAgICAgICAgICAgICAncGxhdGZvcm0nOiAnYW5kcm9pZCcsCiAgICAgICAgICAgICAgICAgICAgJ2Rlc2t0b3AnOiBGYWxzZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgIyBGYWxsYmFjayB0byByZWd1bGFyIHJlcXVlc3RzIGlmIG5laXRoZXIgaXMgYXZhaWxhYmxlCiAgICAgICAgICAgIHNlbGYuY2xpZW50ID0gcmVxdWVzdHMuU2Vzc2lvbigpCiAgICAgICAgICAgIAogICAgICAgICMgQ+G6pXUgaMOsbmggdMO5eSBjaOG7jW4gY2hvIGN1cmxfY2ZmaQogICAgICAgIHNlbGYuaW1wZXJzb25hdGUgPSAiY2hyb21lMTEwIgogICAgICAgIAogICAgICAgICMgQmnhur9uIHRoZW8gZMO1aSB0aHJlYWQgcmVwb3J0CiAgICAgICAgc2VsZi5yZXBvcnRfdGhyZWFkID0gTm9uZQogICAgICAgIAogICAgICAgICMgS2jhu59pIMSR4buZbmcgdGhyZWFkIHJlcG9ydAogICAgICAgIHNlbGYuc3RhcnRfcmVwb3J0X3RocmVhZCgpCgogICAgZGVmIF9jaGVja19pc190ZXJtdXgoc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiIKICAgICAgICBLaeG7g20gdHJhIHhlbSDhu6luZyBk4bulbmcgY8OzIMSRYW5nIGNo4bqheSB0csOqbiBUZXJtdXgga2jDtG5nCiAgICAgICAgCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgYm9vbDogVHJ1ZSBu4bq/dSDEkWFuZyBjaOG6oXkgdHLDqm4gVGVybXV4CiAgICAgICAgIiIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICAjIEtp4buDbSB0cmEgYmnhur9uIG3DtGkgdHLGsOG7nW5nIFRFUk1VWF9WRVJTSU9OIGhv4bq3YyDEkcaw4budbmcgZOG6q24gVGVybXV4IHRyb25nIFBBVEgKICAgICAgICAgICAgaW1wb3J0IG9zCiAgICAgICAgICAgIHJldHVybiAnVEVSTVVYX1ZFUlNJT04nIGluIG9zLmVudmlyb24gb3IgJy9kYXRhL2RhdGEvY29tLnRlcm11eCcgaW4gb3MuZW52aXJvbi5nZXQoJ1BBVEgnLCAnJykKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBmZXRjaF9nb2xpa2VfaGVhZGVycyhzZWxmKSAtPiBib29sOgogICAgICAgICIiIgogICAgICAgIEzhuqV5IGhlYWRlcnMgdOG7qyBDaHJvbWUgdsOgIGzGsHUgdsOgbyBkYXRhYmFzZQogICAgICAgIAogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIGJvb2w6IFRydWUgbuG6v3UgdGjDoG5oIGPDtG5nLCBGYWxzZSBu4bq/dSB0aOG6pXQgYuG6oWkKICAgICAgICAiIiIKICAgICAgICBpZiBub3QgUFlDSFJPTUVfQVZBSUxBQkxFOgogICAgICAgICAgICBsb2dnZXIuZXJyb3IoIktow7RuZyB0aOG7gyBs4bqleSBHb0xpa2UgaGVhZGVyczogdGjGsCB2aeG7h24gcHljaHJvbWUga2jDtG5nIGto4bqjIGThu6VuZyIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIGZyb20gcHljaHJvbWUgaW1wb3J0IEJyb3dzZXIKICAgICAgICAKICAgICAgICB0cnk6CiAgICAgICAgICAgICMgS2nhu4NtIHRyYSBDaHJvbWUgxJHDoyBjw6BpIMSR4bq3dCBjaMawYQogICAgICAgICAgICBpZiBub3Qgc2VsZi5oZWxwZXIuaXNfYXBwX2luc3RhbGxlZCgiY29tLmFuZHJvaWQuY2hyb21lIik6CiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoIkNocm9tZSBjaMawYSDEkcaw4bujYyBjw6BpIMSR4bq3dCB0csOqbiB0aGnhur90IGLhu4siKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIyBN4bufIENocm9tZSB24bubaSBsaW5rIEdvTGlrZSB0cuG7sWMgdGnhur9wIGLhurFuZyBBREIKICAgICAgICAgICAgbG9nZ2VyLmluZm8oIk3hu58gQ2hyb21lIHbhu5tpIGxpbmsgR29MaWtlIHRy4buxYyB0aeG6v3AuLi4iKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiBzZWxmLmhlbHBlci5pc19hZGJfY29ubmVjdGVkOgogICAgICAgICAgICAgICAgICAgICMgTOG6pXkgdGhhbSBz4buRIHRoaeG6v3QgYuG7iyB04burIGhlbHBlcgogICAgICAgICAgICAgICAgICAgIGRldmljZV9wYXJhbXMgPSBzZWxmLmhlbHBlci5fZ2V0X2FkYl9kZXZpY2VfcGFyYW0oKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICMgTeG7nyBDaHJvbWUgduG7m2kgbGluayBHb0xpa2UgdHLhu7FjIHRp4bq/cAogICAgICAgICAgICAgICAgICAgIGNtZCA9IFsiYWRiIl0gKyBkZXZpY2VfcGFyYW1zICsgWwogICAgICAgICAgICAgICAgICAgICAgICAic2hlbGwiLCAiYW0iLCAic3RhcnQiLCAKICAgICAgICAgICAgICAgICAgICAgICAgIi1uIiwgImNvbS5hbmRyb2lkLmNocm9tZS9jb20uZ29vZ2xlLmFuZHJvaWQuYXBwcy5jaHJvbWUuTWFpbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICItYSIsICJhbmRyb2lkLmludGVudC5hY3Rpb24uVklFVyIsCiAgICAgICAgICAgICAgICAgICAgICAgICItZCIsICJodHRwczovL2FwcC5nb2xpa2UubmV0IgogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICBzdWJwcm9jZXNzLnJ1bigKICAgICAgICAgICAgICAgICAgICAgICAgY21kLAogICAgICAgICAgICAgICAgICAgICAgICBjaGVjaz1UcnVlLAogICAgICAgICAgICAgICAgICAgICAgICBzdGRvdXQ9c3VicHJvY2Vzcy5QSVBFLAogICAgICAgICAgICAgICAgICAgICAgICBzdGRlcnI9c3VicHJvY2Vzcy5QSVBFCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLEkMOjIG3hu58gQ2hyb21lIHbhu5tpIEdvTGlrZSBi4bqxbmcgQURCIikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCJBREIga2jDtG5nIMSRxrDhu6NjIGvhur90IG7hu5FpLCBraMO0bmcgdGjhu4MgbeG7nyBDaHJvbWUiKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICBleGNlcHQgc3VicHJvY2Vzcy5TdWJwcm9jZXNzRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIkzhu5dpIGtoaSBt4bufIENocm9tZSBi4bqxbmcgQURCOiB7ZX0iKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIAogICAgICAgICAgICAjIENo4budIENocm9tZSB04bqjaSB4b25nCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMTApCgogICAgICAgICAgICAjIFRoaeG6v3QgbOG6rXAgQ2hyb21lIGRlYnVnIHBvcnQgYuG6sW5nIEFEQgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBkZXZpY2VfcGFyYW1zID0gc2VsZi5oZWxwZXIuX2dldF9hZGJfZGV2aWNlX3BhcmFtKCkKICAgICAgICAgICAgICAgIGNtZCA9IFsiYWRiIl0gKyBkZXZpY2VfcGFyYW1zICsgWyJmb3J3YXJkIiwgInRjcDo5MjIzIiwgImxvY2FsYWJzdHJhY3Q6Y2hyb21lX2RldnRvb2xzX3JlbW90ZSJdCiAgICAgICAgICAgICAgICBzdWJwcm9jZXNzLnJ1bigKICAgICAgICAgICAgICAgICAgICBjbWQsCiAgICAgICAgICAgICAgICAgICAgY2hlY2s9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICBzdGRvdXQ9c3VicHJvY2Vzcy5QSVBFLAogICAgICAgICAgICAgICAgICAgIHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLEkMOjIHRoaeG6v3QgbOG6rXAgQ2hyb21lIGRlYnVnIHBvcnQiKQogICAgICAgICAgICBleGNlcHQgc3VicHJvY2Vzcy5TdWJwcm9jZXNzRXJyb3IgYXMgZToKICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIkzhu5dpIGtoaSB0aGnhur90IGzhuq1wIENocm9tZSBkZWJ1ZyBwb3J0OiB7ZX0iKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIyBL4bq/dCBu4buRaSDEkeG6v24gQ2hyb21lIGLhurFuZyBweWNocm9tZQogICAgICAgICAgICBicm93c2VyID0gQnJvd3NlcigiaHR0cDovL2xvY2FsaG9zdDo5MjIzIikKICAgICAgICAgICAgCiAgICAgICAgICAgICMgTOG6pXkgdGFiIGhp4buHbiB04bqhaSAoc+G6vSBsw6AgdGFiIEdvTGlrZSB2w6wgduG7q2EgbeG7nykKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgdGFicyA9IGJyb3dzZXIubGlzdF90YWIoKQogICAgICAgICAgICAgICAgaWYgbm90IHRhYnM6CiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCJLaMO0bmcgdMOsbSB0aOG6pXkgdGFiIG7DoG8gdHJvbmcgQ2hyb21lIikKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgU+G7rSBk4bulbmcgdGFiIMSR4bqndSB0acOqbiAodGFiIEdvTGlrZSB24burYSBt4bufKQogICAgICAgICAgICAgICAgZ29saWtlX3RhYiA9IHRhYnNbMF0KICAgICAgICAgICAgICAgIGdvbGlrZV90YWIuc3RhcnQoKQogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oIsSQw6Mga+G6v3QgbuG7kWkgxJHhur9uIHRhYiBHb0xpa2UiKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIkzhu5dpIGtoaSBr4bq/dCBu4buRaSDEkeG6v24gQ2hyb21lIHRhYjoge2V9IikKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAKICAgICAgICAgICAgIyBC4bqtdCB0aGVvIGTDtWkgbeG6oW5nCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGdvbGlrZV90YWIuTmV0d29yay5lbmFibGUoKQogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oIsSQw6MgYuG6rXQgdGhlbyBkw7VpIG3huqFuZyIpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIkzhu5dpIGtoaSBi4bqtdCB0aGVvIGTDtWkgbeG6oW5nOiB7ZX0iKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEJp4bq/biDEkeG7gyBraeG7g20gdHJhIHhlbSByZXF1ZXN0IMSRw6MgxJHGsOG7o2MgZ2hpIG5o4bqtbiBjaMawYQogICAgICAgICAgICByZXF1ZXN0X2NhcHR1cmVkID0gRmFsc2UKICAgICAgICAgICAgaGVhZGVycyA9IE5vbmUKICAgICAgICAgICAgCiAgICAgICAgICAgICMgxJDEg25nIGvDvSBz4buxIGtp4buHbiByZXF1ZXN0V2lsbEJlU2VudAogICAgICAgICAgICBkZWYgcmVxdWVzdF9jYWxsYmFjaygqKmt3YXJncyk6CiAgICAgICAgICAgICAgICBub25sb2NhbCByZXF1ZXN0X2NhcHR1cmVkLCBoZWFkZXJzCiAgICAgICAgICAgICAgICBpZiByZXF1ZXN0X2NhcHR1cmVkOgogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXF1ZXN0ID0ga3dhcmdzLmdldCgicmVxdWVzdCIsIHt9KQogICAgICAgICAgICAgICAgdXJsID0gcmVxdWVzdC5nZXQoInVybCIsICIiKQogICAgICAgICAgICAgICAgbWV0aG9kID0gcmVxdWVzdC5nZXQoIm1ldGhvZCIsICIiKQogICAgICAgICAgICAgICAgaWYgImh0dHBzOi8vZ2F0ZXdheS5nb2xpa2UubmV0L2FwaS9zdGF0aXN0aWNzL3JlcG9ydCIgaW4gdXJsIGFuZCBtZXRob2QgPT0gIkdFVCI6CiAgICAgICAgICAgICAgICAgICAgaGVhZGVycyA9IHJlcXVlc3QuZ2V0KCJoZWFkZXJzIiwge30pCiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oIsSQw6MgZ2hpIG5o4bqtbiBoZWFkZXJzIEdvTGlrZSB0aMOgbmggY8O0bmciKQogICAgICAgICAgICAgICAgICAgIHJlcXVlc3RfY2FwdHVyZWQgPSBUcnVlCiAgICAgICAgICAgIAogICAgICAgICAgICBnb2xpa2VfdGFiLk5ldHdvcmsucmVxdWVzdFdpbGxCZVNlbnQgPSByZXF1ZXN0X2NhbGxiYWNrCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFThuqNpIGzhuqFpIHRyYW5nIMSR4buDIMSR4bqjbSBi4bqjbyBjw7MgcmVxdWVzdCBBUEkKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZ29saWtlX3RhYi5jYWxsX21ldGhvZCgiUGFnZS5yZWxvYWQiKQogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oIsSQw6MgdOG6o2kgbOG6oWkgdHJhbmcgR29MaWtlIikKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiTOG7l2kga2hpIHThuqNpIGzhuqFpIHRyYW5nOiB7ZX0iKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIAogICAgICAgICAgICAjIMSQ4bujaSDEkeG7gyBnaGkgbmjhuq1uIHJlcXVlc3QKICAgICAgICAgICAgbG9nZ2VyLmluZm8oIsSQYW5nIGNo4budIGdoaSBuaOG6rW4gcmVxdWVzdCBHb0xpa2UuLi4iKQogICAgICAgICAgICB0aW1lLnNsZWVwKDE1KQogICAgICAgICAgICAKICAgICAgICAgICAgIyBU4bqvdCB0aGVvIGTDtWkgbeG6oW5nCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGdvbGlrZV90YWIuTmV0d29yay5kaXNhYmxlKCkKICAgICAgICAgICAgICAgIGdvbGlrZV90YWIuTmV0d29yay5yZXF1ZXN0V2lsbEJlU2VudCA9IE5vbmUKICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLEkMOjIHThuq90IHRoZW8gZMO1aSBt4bqhbmciKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZyhmIkzhu5dpIGtoaSB04bqvdCB0aGVvIGTDtWkgbeG6oW5nOiB7ZX0iKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgaGVhZGVyczoKICAgICAgICAgICAgICAgICMgTMawdSBoZWFkZXJzIHbDoG8gZGF0YWJhc2UKICAgICAgICAgICAgICAgIHNlbGYuc2F2ZV9nb2xpa2VfaGVhZGVycyhoZWFkZXJzKQogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oIsSQw6MgbMawdSBoZWFkZXJzIHbDoG8gZGF0YWJhc2UiKQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKCJLaMO0bmcgdGjhu4MgbOG6pXkgdGjDtG5nIHRpbiB4w6FjIHRo4buxYyBHb0xpa2UsIHZ1aSBsw7JuZyBraeG7g20gdHJhIGzhuqFpIikKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAgICAgCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsb2dnZXIuZXhjZXB0aW9uKGUsICJM4buXaSBraGkgbOG6pXkgR29MaWtlIGhlYWRlcnMiKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBmaW5hbGx5OgogICAgICAgICAgICAjIMSQ4bqjbSBi4bqjbyDEkcOzbmcgQ2hyb21lCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHNlbGYuaGVscGVyLmNsb3NlX2FwcCgiY29tLmFuZHJvaWQuY2hyb21lIikKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwogICAgCiAgICBkZWYgc2F2ZV9nb2xpa2VfaGVhZGVycyhzZWxmLCBoZWFkZXJzOiBEaWN0W3N0ciwgQW55XSkgLT4gYm9vbDoKICAgICAgICAiIiIKICAgICAgICBMxrB1IEdvTGlrZSBoZWFkZXJzIHbDoG8gZGF0YWJhc2UKICAgICAgICAKICAgICAgICBBcmdzOgogICAgICAgICAgICBoZWFkZXJzOiBIZWFkZXJzIHThu6sgcmVxdWVzdCBHb0xpa2UKICAgICAgICAgICAgCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgYm9vbDogVHJ1ZSBu4bq/dSB0aMOgbmggY8O0bmcsIEZhbHNlIG7hur91IHRo4bqldCBi4bqhaQogICAgICAgICIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBDaOG7iSBsxrB1IHbDoG8gY+G6pXUgaMOsbmggdGhp4bq/dCBi4buLIMSR4buDIMSR4buTbmcgYuG7mSB24bubaSBzZXJ2ZXIKICAgICAgICAgICAgc2VsZi5kYi5zZXRfZGV2aWNlX2NvbmZpZygiZ29saWtlX2hlYWRlcnMiLCBoZWFkZXJzKQogICAgICAgICAgICBzZWxmLmRiLnNldF9kZXZpY2VfY29uZmlnKCJnb2xpa2VfaGVhZGVyc191cGRhdGVkIiwgaW50KHRpbWUudGltZSgpKSkKICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiJM4buXaSBraGkgbMawdSBHb0xpa2UgaGVhZGVyczoge2V9IikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIGRlZiBuZWVkc19oZWFkZXJzX3JlZnJlc2goc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiIKICAgICAgICBLaeG7g20gdHJhIHhlbSBjw7MgY+G6p24gbMOgbSBt4bubaSBHb0xpa2UgaGVhZGVycyBraMO0bmcKICAgICAgICAKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBib29sOiBUcnVlIG7hur91IGPhuqduIGzDoG0gbeG7m2ksIEZhbHNlIG7hur91IGhlYWRlcnMgY8OybiBo4bujcCBs4buHCiAgICAgICAgIiIiCiAgICAgICAgIyBLaeG7g20gdHJhIHhlbSDEkcOjIGPDsyB0aMO0bmcgdGluIHjDoWMgdGjhu7FjIEdvTGlrZSBjaMawYQogICAgICAgIGlmIG5vdCBzZWxmLmlzX2dvbGlrZV9hdXRoZW50aWNhdGVkKCk6CiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIAogICAgICAgICMgS2nhu4NtIHRyYSB0aOG7nWkgZ2lhbiBj4bqtcCBuaOG6rXQgY3Xhu5FpCiAgICAgICAgbGFzdF91cGRhdGUgPSBzZWxmLmRiLmdldCgiZ29saWtlX2hlYWRlcnNfdXBkYXRlZCIsIDApCiAgICAgICAgY3VycmVudF90aW1lID0gaW50KHRpbWUudGltZSgpKQogICAgICAgIAogICAgICAgICMgTuG6v3UgxJHDoyBj4bqtcCBuaOG6rXQgdHJvbmcgdsOybmcgMjQgZ2nhu50gcXVhLCBraMO0bmcgY+G6p24gbOG6pXkgbOG6oWkKICAgICAgICByZXR1cm4gY3VycmVudF90aW1lIC0gbGFzdF91cGRhdGUgPj0gODY0MDAgICMgMjQgZ2nhu50gPSA4NjQwMCBnacOieQogICAgCiAgICBkZWYgZ2V0X2dvbGlrZV9oZWFkZXJzKHNlbGYpIC0+IERpY3Rbc3RyLCBBbnldOgogICAgICAgICIiIgogICAgICAgIEzhuqV5IEdvTGlrZSBoZWFkZXJzIHThu6sgZGF0YWJhc2UKICAgICAgICAKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBEaWN0W3N0ciwgQW55XTogSGVhZGVycyBob+G6t2MgZGljdGlvbmFyeSBy4buXbmcgbuG6v3Uga2jDtG5nIGPDswogICAgICAgICIiIgogICAgICAgICMgQ2jhu4kgbOG6pXkgdOG7qyBj4bqldSBow6xuaCB0aGnhur90IGLhu4sKICAgICAgICByZXR1cm4gc2VsZi5kYi5nZXRfZGV2aWNlX2NvbmZpZygiZ29saWtlX2hlYWRlcnMiLCB7fSkKICAgICAgICAKICAgIGRlZiBpc19nb2xpa2VfYXV0aGVudGljYXRlZChzZWxmKSAtPiBib29sOgogICAgICAgICIiIgogICAgICAgIEtp4buDbSB0cmEgeGVtIMSRw6MgY8OzIHRow7RuZyB0aW4geMOhYyB0aOG7sWMgR29MaWtlIGjhu6NwIGzhu4cgY2jGsGEKICAgICAgICBWYWxpZGF0ZSBj4bqjIEF1dGhvcml6YXRpb24gdsOgIHQgdG9rZW4KICAgICAgICAKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBib29sOiBUcnVlIG7hur91IMSRw6MgeMOhYyB0aOG7sWMgxJHhuqd5IMSR4bunLCBGYWxzZSBu4bq/dSB0aGnhur91IHRow7RuZyB0aW4KICAgICAgICAiIiIKICAgICAgICBoZWFkZXJzID0gc2VsZi5nZXRfZ29saWtlX2hlYWRlcnMoKQogICAgICAgIAogICAgICAgICMgS2nhu4NtIHRyYSBjw7MgaGVhZGVycyBraMO0bmcKICAgICAgICBpZiBub3QgaGVhZGVyczoKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIAogICAgICAgICMgS2nhu4NtIHRyYSBjw7MgQXV0aG9yaXphdGlvbiB0b2tlbiBraMO0bmcKICAgICAgICBhdXRob3JpemF0aW9uID0gaGVhZGVycy5nZXQoIkF1dGhvcml6YXRpb24iKSBvciBoZWFkZXJzLmdldCgiYXV0aG9yaXphdGlvbiIpCiAgICAgICAgaWYgbm90IGF1dGhvcml6YXRpb24gb3Igbm90IGF1dGhvcml6YXRpb24uc3RhcnRzd2l0aCgiQmVhcmVyICIpOgogICAgICAgICAgICBsb2dnZXIud2FybmluZygiR29MaWtlIGhlYWRlcnMgdGhp4bq/dSBBdXRob3JpemF0aW9uIHRva2VuIGjhu6NwIGzhu4ciKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgCiAgICAgICAgIyBLaeG7g20gdHJhIGPDsyB0IHRva2VuIGtow7RuZwogICAgICAgIHRfdG9rZW4gPSBoZWFkZXJzLmdldCgidCIpCiAgICAgICAgaWYgbm90IHRfdG9rZW46CiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKCJHb0xpa2UgaGVhZGVycyB0aGnhur91IHQgdG9rZW4iKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgCiAgICAgICAgbG9nZ2VyLmRlYnVnKCJHb0xpa2UgaGVhZGVycyBo4bujcCBs4buHIHbhu5tpIMSR4bunIHRow7RuZyB0aW4gQXV0aG9yaXphdGlvbiB2w6AgdCB0b2tlbiIpCiAgICAgICAgcmV0dXJuIFRydWUKICAgIAogICAgZGVmIGZldGNoX2dvbGlrZV9oZWFkZXJzX3dpdGhfcmV0cnkoc2VsZiwgZm9yY2VfcmVmcmVzaDogYm9vbCA9IEZhbHNlKSAtPiBib29sOgogICAgICAgICIiIgogICAgICAgIEzhuqV5IEdvTGlrZSBoZWFkZXJzIHbhu5tpIGPGoSBjaOG6vyB0aOG7rSBs4bqhaS4gQ2jhu4kgbOG6pXkga2hpIGPDsyBjb25maWcgaXNfYXV0b19nZXRfZ29saWtlX2hlYWRlciA9IHRydWUuCiAgICAgICAgVGjhu60gbOG6oWkgdOG7kWkgxJFhIDUgbOG6p24gbuG6v3UgdGjhuqV0IGLhuqFpLgogICAgICAgIENo4buJIGzhuqV5IGzhuqFpIGhlYWRlcnMgMSBs4bqnbiBt4buXaSBuZ8OgeSBk4buxYSB2w6BvIHRo4budaSBnaWFuIGPhuq1wIG5o4bqtdCBjdeG7kWkgY8O5bmcuCiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgZm9yY2VfcmVmcmVzaDogTuG6v3UgVHJ1ZSwgc+G6vSBsdcO0biBs4bqleSBs4bqhaSBoZWFkZXJzIGLhuqV0IGvhu4MgdGjhu51pIGdpYW4gY+G6rXAgbmjhuq10IGN14buRaQogICAgICAgICAgICAKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBib29sOiBUcnVlIG7hur91IMSRw6MgY8OzIGhlYWRlcnMgaOG7o3AgbOG7hyBob+G6t2MgbOG6pXkgxJHGsOG7o2MgaGVhZGVycyBt4bubaSwgRmFsc2UgbuG6v3Uga2jDtG5nIGzhuqV5IMSRxrDhu6NjCiAgICAgICAgIiIiCiAgICAgICAgIyBLaeG7g20gdHJhIGNvbmZpZyBjw7MgY2hvIHBow6lwIHThu7EgxJHhu5luZyBs4bqleSBoZWFkZXJzIGtow7RuZwogICAgICAgIGlzX2F1dG9fZ2V0X2hlYWRlciA9IHNlbGYuZGIuZ2V0X2RldmljZV9jb25maWcoImlzX2F1dG9fZ2V0X2dvbGlrZV9oZWFkZXIiLCBGYWxzZSkgICMgTeG6t2MgxJHhu4tuaCBmYWxzZQogICAgICAgIAogICAgICAgIGlmIG5vdCBpc19hdXRvX2dldF9oZWFkZXIgYW5kIG5vdCBmb3JjZV9yZWZyZXNoOgogICAgICAgICAgICBsb2dnZXIuZGVidWcoIkNvbmZpZyBpc19hdXRvX2dldF9nb2xpa2VfaGVhZGVyID0gZmFsc2UsIGLhu48gcXVhIHZp4buHYyB04buxIMSR4buZbmcgbOG6pXkgaGVhZGVycyIpCiAgICAgICAgICAgICMgQ2jhu4kga2nhu4NtIHRyYSB4ZW0gY8OzIGhlYWRlcnMgdOG7qyBzZXJ2ZXIga2jDtG5nCiAgICAgICAgICAgIHJldHVybiBzZWxmLmlzX2dvbGlrZV9hdXRoZW50aWNhdGVkKCkKICAgICAgICAKICAgICAgICAjIEtp4buDbSB0cmEgeGVtIMSRw6MgY8OzIHRow7RuZyB0aW4geMOhYyB0aOG7sWMgR29MaWtlIGNoxrBhCiAgICAgICAgaWYgc2VsZi5pc19nb2xpa2VfYXV0aGVudGljYXRlZCgpIGFuZCBub3QgZm9yY2VfcmVmcmVzaDoKICAgICAgICAgICAgIyBLaeG7g20gdHJhIHRo4budaSBnaWFuIGPhuq1wIG5o4bqtdCBjdeG7kWkKICAgICAgICAgICAgbGFzdF91cGRhdGUgPSBzZWxmLmRiLmdldCgiZ29saWtlX2hlYWRlcnNfdXBkYXRlZCIsIDApCiAgICAgICAgICAgIGN1cnJlbnRfdGltZSA9IGludCh0aW1lLnRpbWUoKSkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgTuG6v3UgxJHDoyBj4bqtcCBuaOG6rXQgdHJvbmcgdsOybmcgMjQgZ2nhu50gcXVhLCBraMO0bmcgY+G6p24gbOG6pXkgbOG6oWkKICAgICAgICAgICAgaWYgY3VycmVudF90aW1lIC0gbGFzdF91cGRhdGUgPCA4NjQwMDogICMgMjQgZ2nhu50gPSA4NjQwMCBnacOieQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKCLEkMOjIHF1w6EgMjQgZ2nhu50gdOG7qyBs4bqnbiBj4bqtcCBuaOG6rXQgY3Xhu5FpLCBz4bq9IGzDoG0gbeG7m2kgaGVhZGVycyBHb0xpa2UiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGZvcmNlX3JlZnJlc2g6CiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygiQuG6r3QgYnXhu5ljIGzDoG0gbeG7m2kgaGVhZGVycyBHb0xpa2UiKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oIkNoxrBhIGPDsyB0aMO0bmcgdGluIHjDoWMgdGjhu7FjIEdvTGlrZSwgc+G6vSBs4bqleSBoZWFkZXJzIG3hu5tpIikKICAgICAgICAKICAgICAgICAjIFRo4buxYyBoaeG7h24gbOG6pXkgaGVhZGVycyB24bubaSBjxqEgY2jhur8gdGjhu60gbOG6oWkKICAgICAgICBtYXhfYXR0ZW1wdHMgPSA1ICAjIFTEg25nIHPhu5EgbOG6p24gdGjhu60gdOG7qyAzIGzDqm4gNQogICAgICAgIGZvciBhdHRlbXB0IGluIHJhbmdlKDEsIG1heF9hdHRlbXB0cyArIDEpOgogICAgICAgICAgICBsb2dnZXIuaW5mbyhmIsSQYW5nIGzhuqV5IEdvTGlrZSBoZWFkZXJzIChs4bqnbiB0aOG7rSB7YXR0ZW1wdH0ve21heF9hdHRlbXB0c30pLi4uIikKICAgICAgICAgICAgCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICMgVGjhu60gbOG6pXkgaGVhZGVycwogICAgICAgICAgICAgICAgc3VjY2VzcyA9IHNlbGYuZmV0Y2hfZ29saWtlX2hlYWRlcnMoKQogICAgICAgICAgICAgICAgaWYgc3VjY2VzczoKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygixJDDoyBs4bqleSB2w6AgbMawdSBoZWFkZXJzIEdvTGlrZSB0aMOgbmggY8O0bmciKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKGYiS2jDtG5nIHRo4buDIGzhuqV5IGhlYWRlcnMgR29MaWtlIGzhuqduIHthdHRlbXB0fSwgc+G6vSB0aOG7rSBs4bqhaS4uLiIpCiAgICAgICAgICAgICAgICAgICAgIyDEkMOzbmcgQ2hyb21lIG7hur91IGPDsm4gbeG7nwogICAgICAgICAgICAgICAgICAgIHNlbGYuaGVscGVyLmNsb3NlX2FwcCgiY29tLmFuZHJvaWQuY2hyb21lIikKICAgICAgICAgICAgICAgICAgICBpZiBhdHRlbXB0IDwgbWF4X2F0dGVtcHRzOgogICAgICAgICAgICAgICAgICAgICAgICAjIFTEg25nIHRo4budaSBnaWFuIGNo4budIHRoZW8gc+G7kSBs4bqnbiB0aOG7rSAoMTBzLCAyMHMsIDMwcywgNDBzKQogICAgICAgICAgICAgICAgICAgICAgICB3YWl0X3RpbWUgPSBhdHRlbXB0ICogMTAKICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oZiLEkOG7o2kge3dhaXRfdGltZX0gZ2nDonkgdHLGsOG7m2Mga2hpIHRo4butIGzhuqFpLi4uIikKICAgICAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCh3YWl0X3RpbWUpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIkzhu5dpIGtoaSBs4bqleSBoZWFkZXJzIEdvTGlrZToge2V9IikKICAgICAgICAgICAgICAgICMgxJDhuqNtIGLhuqNvIENocm9tZSDEkcaw4bujYyDEkcOzbmcKICAgICAgICAgICAgICAgIHNlbGYuaGVscGVyLmNsb3NlX2FwcCgiY29tLmFuZHJvaWQuY2hyb21lIikKICAgICAgICAgICAgICAgIGlmIGF0dGVtcHQgPCBtYXhfYXR0ZW1wdHM6CiAgICAgICAgICAgICAgICAgICAgIyBUxINuZyB0aOG7nWkgZ2lhbiBjaOG7nSB0aGVvIHPhu5EgbOG6p24gdGjhu60gKDEwcywgMjBzLCAzMHMsIDQwcykKICAgICAgICAgICAgICAgICAgICB3YWl0X3RpbWUgPSBhdHRlbXB0ICogMTAKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhmIsSQ4bujaSB7d2FpdF90aW1lfSBnacOieSB0csaw4bubYyBraGkgdGjhu60gbOG6oWkuLi4iKQogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAod2FpdF90aW1lKQogICAgICAgIAogICAgICAgIGxvZ2dlci5lcnJvcihmIsSQw6MgdGjhu60gbOG6pXkgR29MaWtlIGhlYWRlcnMge21heF9hdHRlbXB0c30gbOG6p24gbmjGsG5nIGtow7RuZyB0aMOgbmggY8O0bmciKQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBhcGlfcmVxdWVzdChzZWxmLCB1cmwsIG1ldGhvZD0iR0VUIiwgcGF5bG9hZD1Ob25lKToKICAgICAgICAiIiIKICAgICAgICBH4buNaSBBUEkgY+G7p2EgR29MaWtlIHbhu5tpIGhlYWRlcnMgxJHDoyBsxrB1CiAgICAgICAgCiAgICAgICAgQXJnczoKICAgICAgICAgICAgdXJsOiBVUkwgY+G7p2EgQVBJCiAgICAgICAgICAgIG1ldGhvZDogUGjGsMahbmcgdGjhu6ljIEhUVFAgKEdFVCBob+G6t2MgUE9TVCkKICAgICAgICAgICAgcGF5bG9hZDogROG7ryBsaeG7h3UgZ+G7rWkgxJFpIChjaG8gUE9TVCByZXF1ZXN0KQogICAgICAgICAgICAKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBEaWN0IGhv4bq3YyBOb25lOiBL4bq/dCBxdeG6oyBBUEkgbuG6v3UgdGjDoG5oIGPDtG5nLCBOb25lIG7hur91IHRo4bqldCBi4bqhaQogICAgICAgICIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgIyBM4bqleSBoZWFkZXJzIHThu6sgZGF0YWJhc2UKICAgICAgICAgICAgaGVhZGVycyA9IHNlbGYuZ2V0X2dvbGlrZV9oZWFkZXJzKCkKICAgICAgICAgICAgaWYgbm90IGhlYWRlcnM6CiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoIktow7RuZyB0w6xtIHRo4bqleSBHb0xpa2UgaGVhZGVycyIpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAgICAgIyDEkOG6o20gYuG6o28gaGVhZGVycyBjw7MgdXNlci1hZ2VudAogICAgICAgICAgICBpZiAidXNlci1hZ2VudCIgbm90IGluIGhlYWRlcnMgYW5kICJVc2VyLUFnZW50IiBub3QgaW4gaGVhZGVyczoKICAgICAgICAgICAgICAgIGhlYWRlcnNbInVzZXItYWdlbnQiXSA9IHNlbGYudXNlcl9hZ2VudAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICMgTOG6pXkgQVBJIGJhc2UgVVJMIHThu6sgY+G6pXUgaMOsbmggdGhp4bq/dCBi4buLIGhv4bq3YyBz4butIGThu6VuZyBt4bq3YyDEkeG7i25oIHThu6sgY29uZmlnCiAgICAgICAgICAgIGFwaV9iYXNlID0gc2VsZi5kYi5nZXRfZGV2aWNlX2NvbmZpZygiZ29saWtlX2FwaV9iYXNlIiwgY29uZmlnLkdPTElLRV9BUElfQkFTRSkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgTuG6v3UgVVJMIGtow7RuZyBi4bqvdCDEkeG6p3UgYuG6sW5nIGh0dHAsIHRow6ptIGFwaV9iYXNlIHbDoG8gdHLGsOG7m2MKICAgICAgICAgICAgaWYgbm90IHVybC5zdGFydHN3aXRoKCJodHRwIik6CiAgICAgICAgICAgICAgICB1cmwgPSBmInthcGlfYmFzZX0ve3VybC5sc3RyaXAoJy8nKX0iCgogICAgICAgICAgICAjIFPhu60gZOG7pW5nIGN1cmxfY2ZmaSBob+G6t2MgY2xvdWRzY3JhcGVyIHTDuXkgdGhlbyBtw7RpIHRyxrDhu51uZwogICAgICAgICAgICBpZiBzZWxmLnVzZV9jdXJsX2NmZmkgYW5kIENVUkxfQ0ZGSV9BVkFJTEFCTEU6CiAgICAgICAgICAgICAgICBpZiBtZXRob2QgPT0gIkdFVCI6CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBjdXJsX3JlcXVlc3RzLmdldCgKICAgICAgICAgICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsCiAgICAgICAgICAgICAgICAgICAgICAgIGltcGVyc29uYXRlPXNlbGYuaW1wZXJzb25hdGUKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbGlmIG1ldGhvZCA9PSAiUE9TVCI6CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBjdXJsX3JlcXVlc3RzLnBvc3QoCiAgICAgICAgICAgICAgICAgICAgICAgIHVybCwKICAgICAgICAgICAgICAgICAgICAgICAganNvbj1wYXlsb2FkLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsCiAgICAgICAgICAgICAgICAgICAgICAgIGltcGVyc29uYXRlPXNlbGYuaW1wZXJzb25hdGUKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIk1ldGhvZCBraMO0bmcgaOG7o3AgbOG7hzoge21ldGhvZH0iKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIFPhu60gZOG7pW5nIGNsb3Vkc2NyYXBlciBob+G6t2MgZmFsbGJhY2sgdG8gcmVxdWVzdHMKICAgICAgICAgICAgICAgIGlmIG1ldGhvZCA9PSAiR0VUIjoKICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldCgKICAgICAgICAgICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbGlmIG1ldGhvZCA9PSAiUE9TVCI6CiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5wb3N0KAogICAgICAgICAgICAgICAgICAgICAgICB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIGpzb249cGF5bG9hZCwKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1oZWFkZXJzCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiJNZXRob2Qga2jDtG5nIGjhu6NwIGzhu4c6IHttZXRob2R9IikKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgICAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyBY4butIGzDvSBoaeG7g24gdGjhu4sgbOG7l2kgZOG7hSDEkeG7jWMgaMahbgogICAgICAgICAgICAgICAgZXJyb3JfbXNnID0gcmVzcG9uc2UudGV4dAogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICMgUGFyc2UgcmVzcG9uc2UgbMOgIEpTT04KICAgICAgICAgICAgICAgICAgICBlcnJvcl9qc29uID0gcmVzcG9uc2UuanNvbigpCiAgICAgICAgICAgICAgICAgICAgIyBGb3JtYXQgbG9nIHRow6BuaCAxIGTDsm5nCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gZXJyb3JfanNvbi5nZXQoJ3N0YXR1cycsIHJlc3BvbnNlLnN0YXR1c19jb2RlKQogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSBlcnJvcl9qc29uLmdldCgnc3VjY2VzcycsIEZhbHNlKQogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBlcnJvcl9qc29uLmdldCgnbWVzc2FnZScsICdLaMO0bmcgY8OzIHRow7RuZyBiw6FvIGzhu5dpJykKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAjIEfhu5lwIHRow6BuaCAxIGTDsm5nCiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiQVBJIHRy4bqjIHbhu4EgbOG7l2kgW3tzdGF0dXN9XSBbc3VjY2Vzczoge3N1Y2Nlc3N9XSB7bWVzc2FnZX0iKQogICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgICAgICMgTuG6v3Uga2jDtG5nIHBo4bqjaSBKU09OLCBoaeG7g24gdGjhu4sgdGV4dCB0aMO0CiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiQVBJIHRy4bqjIHbhu4EgbOG7l2kge3Jlc3BvbnNlLnN0YXR1c19jb2RlfToge2Vycm9yX21zZ30iKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiJM4buXaSBraGkgZ+G7jWkgQVBJIFt7bWV0aG9kfSB7dXJsfV06IHtzdHIoZSl9IikKICAgICAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBkZWYgX2N1cmxfY2ZmaV9yZXF1ZXN0KHNlbGYsIHVybDogc3RyLCBtZXRob2Q6IHN0ciA9ICJnZXQiLCBoZWFkZXJzOiBEaWN0W3N0ciwgc3RyXSA9IE5vbmUsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IERpY3Rbc3RyLCBBbnldID0gTm9uZSwgdGltZW91dDogaW50ID0gMzApIC0+IE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXToKICAgICAgICAiIiIKICAgICAgICBUaOG7sWMgaGnhu4duIHJlcXVlc3Qgc+G7rSBk4bulbmcgY3VybF9jZmZpIChoaeG7h3UgcXXhuqMgY2hvIENsb3VkZmxhcmUpCiAgICAgICAgIiIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBtZXRob2QubG93ZXIoKSA9PSAiZ2V0IjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gY3VybF9yZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9aGVhZGVycywKICAgICAgICAgICAgICAgICAgICBkYXRhPWRhdGEsCiAgICAgICAgICAgICAgICAgICAgdGltZW91dD10aW1lb3V0LAogICAgICAgICAgICAgICAgICAgIGltcGVyc29uYXRlPSJjaHJvbWUxMTAiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsc2U6ICAjIFBPU1QKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gY3VybF9yZXF1ZXN0cy5wb3N0KAogICAgICAgICAgICAgICAgICAgIHVybCwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPWhlYWRlcnMsCiAgICAgICAgICAgICAgICAgICAgZGF0YT1kYXRhLAogICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ9dGltZW91dCwKICAgICAgICAgICAgICAgICAgICBpbXBlcnNvbmF0ZT0iY2hyb21lMTEwIgogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiTOG7l2kgc3RhdHVzIGNvZGU6IHtyZXNwb25zZS5zdGF0dXNfY29kZX0iKQogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIkzhu5dpIGtoaSBn4buNaSBBUEkgY3VybF9jZmZpIFt7bWV0aG9kfSB7dXJsfV06IHtzdHIoZSl9IikKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAgICAgCiAgICBkZWYgZmV0Y2hfZ29saWtlX3JlcG9ydChzZWxmKSAtPiBEaWN0W3N0ciwgQW55XToKICAgICAgICAiIiIKICAgICAgICBM4bqleSB0aMO0bmcgdGluIHJlcG9ydCB04burIEdvTGlrZSB2w6AgdOG7lW5nIGjhu6NwIGzhuqFpCiAgICAgICAgCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgRGljdFtzdHIsIEFueV06IFRow7RuZyB0aW4gcmVwb3J0IMSRw6MgdOG7lW5nIGjhu6NwIGhv4bq3YyBkaWN0IHLhu5duZyBu4bq/dSB0aOG6pXQgYuG6oWkKICAgICAgICAiIiIKICAgICAgICB0cnk6CgogICAgICAgICAgICAjIEfhu41pIEFQSSAvbWUgxJHhu4MgbOG6pXkgdGjDtG5nIHRpbiBuZ8aw4budaSBkw7luZwogICAgICAgICAgICB1c2VyX2luZm8gPSBzZWxmLmFwaV9yZXF1ZXN0KCJ1c2Vycy9tZSIpCiAgICAgICAgICAgIHVzZXJfc3VtbWFyeSA9IHt9CiAgICAgICAgICAgIGlmIHVzZXJfaW5mbyBhbmQgdXNlcl9pbmZvLmdldCgic3VjY2VzcyIsIEZhbHNlKSBhbmQgImRhdGEiIGluIHVzZXJfaW5mbzoKICAgICAgICAgICAgICAgIGRhdGFfdXNlciA9IHVzZXJfaW5mb1siZGF0YSJdCiAgICAgICAgICAgICAgICB1c2VyX3N1bW1hcnkgPSB7CiAgICAgICAgICAgICAgICAgICAgImdvbGlrZV91c2VyX2lkIjogZGF0YV91c2VyLmdldCgiaWQiKSwKICAgICAgICAgICAgICAgICAgICAiZ29saWtlX3VzZXJfbmFtZSI6IGRhdGFfdXNlci5nZXQoIm5hbWUiKSwKICAgICAgICAgICAgICAgICAgICAiZ29saWtlX3VzZXJfZW1haWwiOiBkYXRhX3VzZXIuZ2V0KCJlbWFpbCIpLAogICAgICAgICAgICAgICAgICAgICJnb2xpa2VfdXNlcl91c2VybmFtZSI6IGRhdGFfdXNlci5nZXQoInVzZXJuYW1lIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhmIlRow7RuZyB0aW4gbmfGsOG7nWkgZMO5bmcgR29MaWtlOiB7dXNlcl9zdW1tYXJ5fSIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZygiS2jDtG5nIGzhuqV5IMSRxrDhu6NjIHRow7RuZyB0aW4gL21lIHThu6sgR29MaWtlIGhv4bq3YyBwaOG6o24gaOG7k2kga2jDtG5nIGjhu6NwIGzhu4ciKQoKICAgICAgICAgICAgIyBH4buNaSBBUEkgcmVwb3J0CiAgICAgICAgICAgIHJlcG9ydF9kYXRhID0gc2VsZi5hcGlfcmVxdWVzdCgic3RhdGlzdGljcy9yZXBvcnQiKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgbm90IHJlcG9ydF9kYXRhIG9yICJzdWNjZXNzIiBub3QgaW4gcmVwb3J0X2RhdGEgb3Igbm90IHJlcG9ydF9kYXRhWyJzdWNjZXNzIl06CiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoIktow7RuZyB0aOG7gyBs4bqleSB0aMO0bmcgdGluIHJlcG9ydCB04burIEdvTGlrZSIpCiAgICAgICAgICAgICAgICByZXR1cm4ge30KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAjIFThu5VuZyBo4bujcCB0aMO0bmcgdGluCiAgICAgICAgICAgIGN1cnJlbnRfY29pbiA9IHJlcG9ydF9kYXRhLmdldCgiY3VycmVudF9jb2luIiwgMCkKICAgICAgICAgICAgbWVzc2FnZSA9IHJlcG9ydF9kYXRhLmdldCgibWVzc2FnZSIsICIiKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBUw61uaCB04buVbmcgcGVuZGluZ19jb2luIHbDoCBob2xkX2NvaW4gdOG7qyBjw6FjIGFwcCBxdWFuIHTDom0KICAgICAgICAgICAgYXBwcyA9IFsiaW5zdGFncmFtIiwgInRpa3RvayIsICJzbmFwY2hhdCJdCiAgICAgICAgICAgIHRvdGFsX3BlbmRpbmdfY29pbiA9IDAKICAgICAgICAgICAgdG90YWxfaG9sZF9jb2luID0gMAogICAgICAgICAgICAKICAgICAgICAgICAgZm9yIGFwcCBpbiBhcHBzOgogICAgICAgICAgICAgICAgaWYgYXBwIGluIHJlcG9ydF9kYXRhOgogICAgICAgICAgICAgICAgICAgIGFwcF9kYXRhID0gcmVwb3J0X2RhdGFbYXBwXQogICAgICAgICAgICAgICAgICAgIHRvdGFsX3BlbmRpbmdfY29pbiArPSBhcHBfZGF0YS5nZXQoInBlbmRpbmdfY29pbiIsIDApCiAgICAgICAgICAgICAgICAgICAgdG90YWxfaG9sZF9jb2luICs9IGFwcF9kYXRhLmdldCgiaG9sZF9jb2luIiwgMCkKICAgICAgICAgICAgCiAgICAgICAgICAgCgogICAgICAgICAgICAjIFThuqFvIGRpY3Qga+G6v3QgcXXhuqMgdOG7lW5nIGjhu6NwCiAgICAgICAgICAgIHN1bW1hcnkgPSB7CiAgICAgICAgICAgICAgICAiY3VycmVudF9jb2luIjogY3VycmVudF9jb2luLAogICAgICAgICAgICAgICAgInRvdGFsX3BlbmRpbmdfY29pbiI6IHRvdGFsX3BlbmRpbmdfY29pbiwKICAgICAgICAgICAgICAgICJ0b3RhbF9ob2xkX2NvaW4iOiB0b3RhbF9ob2xkX2NvaW4sCiAgICAgICAgICAgICAgICAiZ29saWtlX3JlcG9ydF9tZXNzYWdlIjogbWVzc2FnZSwKICAgICAgICAgICAgICAgICJnb2xpa2VfcmVwb3J0X3VwZGF0ZWRfYXQiOiBpbnQodGltZS50aW1lKCkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgIyBHaMOpcCB0aMO0bmcgdGluIG5nxrDhu51pIGTDuW5nIHbDoG8gc3VtbWFyeQogICAgICAgICAgICBzdW1tYXJ5LnVwZGF0ZSh1c2VyX3N1bW1hcnkpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEzGsHUgdsOgbyBkYXRhYmFzZQogICAgICAgICAgICBzZWxmLmRiLnNldCgiZ29saWtlX3JlcG9ydCIsIHN1bW1hcnkpCiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGYixJDDoyBj4bqtcCBuaOG6rXQgdGjDtG5nIHRpbiBHb0xpa2UgcmVwb3J0OiB4dSBoaeG7h24gdOG6oWk9e2N1cnJlbnRfY29pbn0sIHh1IMSRYW5nIGNo4budPXt0b3RhbF9wZW5kaW5nX2NvaW59LCB4dSBnaeG7rz17dG90YWxfaG9sZF9jb2lufSIpCiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gc3VtbWFyeQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiTOG7l2kga2hpIGzhuqV5IHRow7RuZyB0aW4gcmVwb3J0IHThu6sgR29MaWtlOiB7ZX0iKQogICAgICAgICAgICByZXR1cm4ge30KICAgICAgICAgICAgCiAgICBkZWYgc3RhcnRfcmVwb3J0X3RocmVhZChzZWxmKToKICAgICAgICAiIiIKICAgICAgICBLaOG7n2kgxJHhu5luZyB0aHJlYWQgxJHhu4tuaCBr4buzIGzhuqV5IHRow7RuZyB0aW4gcmVwb3J0IHThu6sgR29MaWtlCiAgICAgICAgIiIiCiAgICAgICAgIyBLaeG7g20gdHJhIHRocmVhZCDEkcOjIGNo4bqheSBjaMawYQogICAgICAgIGlmIHNlbGYucmVwb3J0X3RocmVhZCBpcyBub3QgTm9uZSBhbmQgc2VsZi5yZXBvcnRfdGhyZWFkLmlzX2FsaXZlKCk6CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJUaHJlYWQgcmVwb3J0IEdvTGlrZSDEkcOjIMSRYW5nIGNo4bqheSIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAKICAgICAgICBpbXBvcnQgdGhyZWFkaW5nCiAgICAgICAgCiAgICAgICAgZGVmIHJlcG9ydF9sb29wKCk6CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJC4bqvdCDEkeG6p3UgdGhyZWFkIGzhuqV5IHRow7RuZyB0aW4gcmVwb3J0IEdvTGlrZSDEkeG7i25oIGvhu7MiKQogICAgICAgICAgICAKICAgICAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAjIEtp4buDbSB0cmEgeGVtIMSRw6MgY8OzIGhlYWRlcnMgY2jGsGEKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLmlzX2dvbGlrZV9hdXRoZW50aWNhdGVkKCk6CiAgICAgICAgICAgICAgICAgICAgICAgICMgTOG6pXkgdGjDtG5nIHRpbiByZXBvcnQKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5mZXRjaF9nb2xpa2VfcmVwb3J0KCkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybmluZygiQ2jGsGEgY8OzIGhlYWRlcnMgR29MaWtlLCBraMO0bmcgdGjhu4MgbOG6pXkgdGjDtG5nIHRpbiByZXBvcnQiKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiJM4buXaSB0cm9uZyB0aHJlYWQgcmVwb3J0IEdvTGlrZToge2V9IikKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgTmfhu6cgMTAgcGjDunQKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoNjAwKQogICAgICAgIAogICAgICAgICMgVOG6oW8gdsOgIGto4bufaSDEkeG7mW5nIHRocmVhZAogICAgICAgIHNlbGYucmVwb3J0X3RocmVhZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXJlcG9ydF9sb29wLCBkYWVtb249VHJ1ZSkKICAgICAgICBzZWxmLnJlcG9ydF90aHJlYWQuc3RhcnQoKQogICAgICAgIGxvZ2dlci5pbmZvKCLEkMOjIGto4bufaSDEkeG7mW5nIHRocmVhZCBs4bqleSB0aMO0bmcgdGluIHJlcG9ydCBHb0xpa2UgxJHhu4tuaCBr4buzIikKCiAgICBkZWYgZ2V0X2dvbGlrZV9yZXBvcnQoc2VsZikgLT4gRGljdFtzdHIsIEFueV06CiAgICAgICAgIiIiCiAgICAgICAgTOG6pXkgdGjDtG5nIHRpbiByZXBvcnQgR29MaWtlIMSRw6MgbMawdSB0cm9uZyBkYXRhYmFzZQogICAgICAgIAogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIERpY3Rbc3RyLCBBbnldOiBUaMO0bmcgdGluIHJlcG9ydCBob+G6t2MgZGljdCBy4buXbmcgbuG6v3Uga2jDtG5nIGPDswogICAgICAgICIiIgogICAgICAgIHJldHVybiBzZWxmLmRiLmdldCgiZ29saWtlX3JlcG9ydCIsIHt9KQo=').decode('utf-8'))
