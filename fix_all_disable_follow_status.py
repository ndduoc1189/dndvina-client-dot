import base64
exec(base64.b64decode('ZnJvbSBzZXJ2aWNlcy5kYl9zZXJ2aWNlIGltcG9ydCBEYXRhYmFzZVNlcnZpY2UKaW1wb3J0IHRpbWUKCmRlZiBmaXhfYWxsX2FjY291bnRzX2Rpc2FibGVfZm9sbG93X3N0YXR1cygpOgogICAgIiIiRml4IHThuqV0IGPhuqMgYWNjb3VudHMgY8OzIGZvbGxvd19kaXNhYmxlX3VudGlsID4gY3VycmVudF90aW1lIG5oxrBuZyBkaXNhYmxlX2ZvbGxvdyA9IEZhbHNlIiIiCiAgICAKICAgIGRiID0gRGF0YWJhc2VTZXJ2aWNlKCkKICAgIGN1cnJlbnRfdGltZSA9IGludCh0aW1lLnRpbWUoKSkKICAgIAogICAgcHJpbnQoZiJDdXJyZW50IHRpbWU6IHtjdXJyZW50X3RpbWV9IikKICAgIHByaW50KCJTY2FubmluZyBhbGwgYWNjb3VudHMgZm9yIGRpc2FibGVfZm9sbG93IGluY29uc2lzdGVuY2llcy4uLiIpCiAgICAKICAgIGFjY291bnRzID0gZGIuZ2V0X2FjY291bnRzKCkKICAgIGZpeGVkX2NvdW50ID0gMAogICAgCiAgICBmb3IgYWNjIGluIGFjY291bnRzOgogICAgICAgIGZvbGxvd19kaXNhYmxlX3VudGlsID0gYWNjLmdldCgiZm9sbG93X2Rpc2FibGVfdW50aWwiLCAwKQogICAgICAgIGRpc2FibGVfZm9sbG93ID0gYWNjLmdldCgiZGlzYWJsZV9mb2xsb3ciLCBGYWxzZSkKICAgICAgICB1c2VybmFtZSA9IGFjYy5nZXQoInVuaXF1ZV91c2VybmFtZSIsIGYiSURfe2FjY1snaWQnXX0iKQogICAgICAgIAogICAgICAgICMgS2nhu4NtIHRyYSBpbmNvbnNpc3RlbmN5CiAgICAgICAgaWYgZm9sbG93X2Rpc2FibGVfdW50aWwgPiBjdXJyZW50X3RpbWUgYW5kIG5vdCBkaXNhYmxlX2ZvbGxvdzoKICAgICAgICAgICAgcmVtYWluaW5nX21pbnV0ZXMgPSBpbnQoKGZvbGxvd19kaXNhYmxlX3VudGlsIC0gY3VycmVudF90aW1lKSAvIDYwKQogICAgICAgICAgICBwcmludChmIlxu4p2MIEluY29uc2lzdGVuY3kgZm91bmQ6IikKICAgICAgICAgICAgcHJpbnQoZiIgICBBY2NvdW50OiB7dXNlcm5hbWV9IikKICAgICAgICAgICAgcHJpbnQoZiIgICBkaXNhYmxlX2ZvbGxvdzoge2Rpc2FibGVfZm9sbG93fSAoc2hvdWxkIGJlIFRydWUpIikKICAgICAgICAgICAgcHJpbnQoZiIgICBmb2xsb3dfZGlzYWJsZV91bnRpbDoge2ZvbGxvd19kaXNhYmxlX3VudGlsfSIpCiAgICAgICAgICAgIHByaW50KGYiICAgUmVtYWluaW5nIG1pbnV0ZXM6IHtyZW1haW5pbmdfbWludXRlc30iKQogICAgICAgICAgICBwcmludChmIiAgIFJlYXNvbjoge2FjYy5nZXQoJ2luYWN0aXZlX2ZvbGxvd19yZWFzb24nLCAnTi9BJyl9IikKICAgICAgICAgICAgCiAgICAgICAgICAgICMgRml4CiAgICAgICAgICAgIHVwZGF0ZV9kYXRhID0gewogICAgICAgICAgICAgICAgImRpc2FibGVfZm9sbG93IjogVHJ1ZSwKICAgICAgICAgICAgICAgICJpc19zeW5jIjogRmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgZGIudXBkYXRlX2FjY291bnQoYWNjWyJpZCJdLCB1cGRhdGVfZGF0YSk6CiAgICAgICAgICAgICAgICBwcmludChmIiAgIOKchSBGaXhlZCEgU2V0IGRpc2FibGVfZm9sbG93ID0gVHJ1ZSIpCiAgICAgICAgICAgICAgICBmaXhlZF9jb3VudCArPSAxCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChmIiAgIOKdjCBGYWlsZWQgdG8gZml4IikKICAgICAgICAKICAgICAgICBlbGlmIGZvbGxvd19kaXNhYmxlX3VudGlsIDw9IGN1cnJlbnRfdGltZSBhbmQgZm9sbG93X2Rpc2FibGVfdW50aWwgPiAwIGFuZCBkaXNhYmxlX2ZvbGxvdzoKICAgICAgICAgICAgIyBBY2NvdW50IHNob3VsZCBiZSBlbmFibGVkIGJ1dCBzdGlsbCBkaXNhYmxlZAogICAgICAgICAgICBwcmludChmIlxu4pqg77iPICBFeHBpcmVkIGRpc2FibGUgcGVyaW9kOiIpCiAgICAgICAgICAgIHByaW50KGYiICAgQWNjb3VudDoge3VzZXJuYW1lfSIpCiAgICAgICAgICAgIHByaW50KGYiICAgZGlzYWJsZV9mb2xsb3c6IHtkaXNhYmxlX2ZvbGxvd30gKHNob3VsZCBiZSBGYWxzZSkiKQogICAgICAgICAgICBwcmludChmIiAgIGZvbGxvd19kaXNhYmxlX3VudGlsOiB7Zm9sbG93X2Rpc2FibGVfdW50aWx9IChleHBpcmVkKSIpCiAgICAgICAgICAgIHByaW50KGYiICAgRW5hYmxpbmcgYWNjb3VudC4uLiIpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBkYi5lbmFibGVfYWNjb3VudF9mb2xsb3coYWNjWyJpZCJdKToKICAgICAgICAgICAgICAgIHByaW50KGYiICAg4pyFIEVuYWJsZWQhIikKICAgICAgICAgICAgICAgIGZpeGVkX2NvdW50ICs9IDEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGYiICAg4p2MIEZhaWxlZCB0byBlbmFibGUiKQogICAgCiAgICBwcmludChmIlxu4pyFIFNjYW4gY29tcGxldGUhIEZpeGVkIHtmaXhlZF9jb3VudH0gYWNjb3VudHMuIikKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBmaXhfYWxsX2FjY291bnRzX2Rpc2FibGVfZm9sbG93X3N0YXR1cygpCg==').decode('utf-8'))
