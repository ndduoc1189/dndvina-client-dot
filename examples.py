import base64
exec(base64.b64decode('ZnJvbSBzZXJ2aWNlcy5oZWxwZXJfc2VydmljZSBpbXBvcnQgSGVscGVyU2VydmljZQppbXBvcnQgdGltZQppbXBvcnQgcmFuZG9tCmZyb20gdHlwaW5nIGltcG9ydCBEaWN0LCBBbnkKCmRlZiBiYXNpY19pbnRlcmFjdGlvbl9leGFtcGxlKCk6CiAgICAiIiIKICAgIFbDrSBk4bulIGPGoSBi4bqjbiB24buBIGPDoWNoIHTGsMahbmcgdMOhYyB24bubaSDEkWnhu4duIHRob+G6oWkKICAgICIiIgogICAgIyBLaOG7n2kgdOG6oW8gY29udHJvbGxlcgogICAgY29udHJvbGxlciA9IEhlbHBlclNlcnZpY2UoKQogICAgCiAgICAjIEzhuqV5IHRow7RuZyB0aW4gdGhp4bq/dCBi4buLCiAgICBkZXZpY2VfaW5mbyA9IGNvbnRyb2xsZXIuZ2V0X2RldmljZV9pbmZvKCkKICAgIGlmIGRldmljZV9pbmZvWyJzdGF0dXMiXSA9PSAic3VjY2VzcyI6CiAgICAgICAgcHJpbnQoZiLEkGFuZyBjaOG6oXkgdHLDqm4gdGhp4bq/dCBi4buLOiB7ZGV2aWNlX2luZm9bJ2RhdGEnXS5nZXQoJ21vZGVsJywgJ1Vua25vd24nKX0iKQogICAgCiAgICAjIENo4bqhbSB2w6BvIG3DoG4gaMOsbmgKICAgIGNvbnRyb2xsZXIudGFwKDUwMCwgNTAwKQogICAgdGltZS5zbGVlcCgxKQogICAgCiAgICAjIFZ14buRdCBsw6puCiAgICBjb250cm9sbGVyLnN3aXBlX3VwKCkKICAgIHRpbWUuc2xlZXAoMSkKICAgIAogICAgIyBOaOG6rXAgdsSDbiBi4bqjbgogICAgY29udHJvbGxlci5pbnB1dF90ZXh0KCJIZWxsbyB3b3JsZCIpCiAgICB0aW1lLnNsZWVwKDEpCiAgICAKICAgICMgTmjhuqVuIG7DunQgSG9tZQogICAgY29udHJvbGxlci5wcmVzc19ob21lKCkKICAgIHByaW50KCLEkMOjIGhvw6BuIHRow6BuaCBjw6FjIHRoYW8gdMOhYyBjxqEgYuG6o24iKQoKZGVmIGZpbmRfZWxlbWVudF9leGFtcGxlKCk6CiAgICAiIiIKICAgIFbDrSBk4bulIHbhu4EgY8OhY2ggdMOsbSB2w6AgdMawxqFuZyB0w6FjIHbhu5tpIHBo4bqnbiB04butIHRyw6puIG3DoG4gaMOsbmgKICAgICIiIgogICAgY29udHJvbGxlciA9IEhlbHBlclNlcnZpY2UoKQogICAgCiAgICAjIE3hu58g4bupbmcgZOG7pW5nIEPDoGkgxJHhurd0CiAgICBwcmludCgixJBhbmcgbeG7nyDhu6luZyBk4bulbmcgQ8OgaSDEkeG6t3QuLi4iKQogICAgY29udHJvbGxlci5vcGVuX2FwcCgiY29tLmFuZHJvaWQuc2V0dGluZ3MiKQogICAgdGltZS5zbGVlcCgyKQogICAgCiAgICAjIFTDrG0gdsOgIG5o4bqlcCB2w6BvIHBo4bqnbiB04butICJXaS1GaSIKICAgIHdpZmlfZWxlbWVudCA9IGNvbnRyb2xsZXIuZmluZF9lbGVtZW50KHRleHQ9IldpLUZpIikKICAgIAogICAgaWYgd2lmaV9lbGVtZW50OgogICAgICAgIHByaW50KCLEkMOjIHTDrG0gdGjhuqV5IHBo4bqnbiB04butIFdpLUZpISIpCiAgICAgICAgY29udHJvbGxlci50YXBfZWxlbWVudCh3aWZpX2VsZW1lbnQuZ2V0KCJib3VuZHMiKSkKICAgICAgICB0aW1lLnNsZWVwKDIpCiAgICAgICAgCiAgICAgICAgIyBUw6xtIGPDtG5nIHThuq9jIFdpLUZpCiAgICAgICAgd2lmaV9zd2l0Y2ggPSBjb250cm9sbGVyLmZpbmRfZWxlbWVudChyZXNvdXJjZV9pZD0iYW5kcm9pZDppZC9zd2l0Y2hfd2lkZ2V0IikKICAgICAgICAKICAgICAgICBpZiB3aWZpX3N3aXRjaDoKICAgICAgICAgICAgcHJpbnQoIsSQw6MgdMOsbSB0aOG6pXkgY8O0bmcgdOG6r2MgV2ktRmkhIikKICAgICAgICAgICAgCiAgICAgICAgICAgICMgS2nhu4NtIHRyYSB0cuG6oW5nIHRow6FpIFdpLUZpCiAgICAgICAgICAgIGlzX29uID0gY29udHJvbGxlci5nZXRfZWxlbWVudF9jaGVja2VkKHdpZmlfc3dpdGNoKQogICAgICAgICAgICBwcmludChmIldpLUZpIGhp4buHbiB04bqhaSB7J2Lhuq10JyBpZiBpc19vbiBlbHNlICd04bqvdCd9IikKICAgICAgICAgICAgCiAgICAgICAgICAgICMgQuG6rXQgV2ktRmkgbuG6v3UgxJFhbmcgdOG6r3QKICAgICAgICAgICAgaWYgbm90IGlzX29uOgogICAgICAgICAgICAgICAgY29udHJvbGxlci50YXBfZWxlbWVudCh3aWZpX3N3aXRjaC5nZXQoImJvdW5kcyIpKQogICAgICAgICAgICAgICAgcHJpbnQoIsSQw6MgYuG6rXQgV2ktRmkiKQogICAgICAgICAgICAgICAgCiAgICAgICAgIyBRdWF5IGzhuqFpIG3DoG4gaMOsbmggdHLGsOG7m2MKICAgICAgICBjb250cm9sbGVyLnByZXNzX2JhY2soKQogICAgZWxzZToKICAgICAgICBwcmludCgiS2jDtG5nIHTDrG0gdGjhuqV5IHBo4bqnbiB04butIFdpLUZpISIpCiAgICAKICAgICMgUXVheSBs4bqhaSBtw6BuIGjDrG5oIGNow61uaAogICAgY29udHJvbGxlci5wcmVzc19ob21lKCkKICAgIHByaW50KCLEkMOjIGhvw6BuIHRow6BuaCB0w6xtIGtp4bq/bSBwaOG6p24gdOG7rSIpCgpkZWYgZWxlbWVudF9wcm9wZXJ0aWVzX2V4YW1wbGUoKToKICAgICIiIgogICAgVsOtIGThu6UgduG7gSBjw6FjaCBs4bqleSB2w6Agc+G7rSBk4bulbmcgY8OhYyB0aHXhu5ljIHTDrW5oIGPhu6dhIHBo4bqnbiB04butCiAgICAiIiIKICAgIGNvbnRyb2xsZXIgPSBIZWxwZXJTZXJ2aWNlKCkKICAgIAogICAgIyBN4bufIOG7qW5nIGThu6VuZyBDw6BpIMSR4bq3dAogICAgcHJpbnQoIsSQYW5nIG3hu58g4bupbmcgZOG7pW5nIEPDoGkgxJHhurd0Li4uIikKICAgIGNvbnRyb2xsZXIub3Blbl9hcHAoImNvbS5hbmRyb2lkLnNldHRpbmdzIikKICAgIHRpbWUuc2xlZXAoMikKICAgIAogICAgIyBUw6xtIHThuqV0IGPhuqMgY8OhYyBt4bulYyBjw6BpIMSR4bq3dAogICAgcHJpbnQoIsSQYW5nIHTDrG0gdOG6pXQgY+G6oyBjw6FjIG3hu6VjIGPDoGkgxJHhurd0Li4uIikKICAgIHNldHRpbmdzX2l0ZW1zID0gY29udHJvbGxlci5maW5kX2FsbF9lbGVtZW50cyhjbGFzc19uYW1lPSJhbmRyb2lkLndpZGdldC5UZXh0VmlldyIpCiAgICAKICAgIGlmIHNldHRpbmdzX2l0ZW1zOgogICAgICAgIHByaW50KGYixJDDoyB0w6xtIHRo4bqleSB7bGVuKHNldHRpbmdzX2l0ZW1zKX0gbeG7pWMgY8OgaSDEkeG6t3QiKQogICAgICAgIAogICAgICAgIGZvciBpLCBpdGVtIGluIGVudW1lcmF0ZShzZXR0aW5nc19pdGVtc1s6NV0pOiAgIyBDaOG7iSB4ZW0gNSBwaOG6p24gdOG7rSDEkeG6p3UgdGnDqm4KICAgICAgICAgICAgdGV4dCA9IGNvbnRyb2xsZXIuZ2V0X2VsZW1lbnRfdGV4dChpdGVtKQogICAgICAgICAgICBjb250ZW50X2Rlc2MgPSBjb250cm9sbGVyLmdldF9lbGVtZW50X2NvbnRlbnRfZGVzYyhpdGVtKQogICAgICAgICAgICByZXNvdXJjZV9pZCA9IGNvbnRyb2xsZXIuZ2V0X2VsZW1lbnRfcmVzb3VyY2VfaWQoaXRlbSkKICAgICAgICAgICAgaXNfY2xpY2thYmxlID0gY29udHJvbGxlci5nZXRfZWxlbWVudF9jbGlja2FibGUoaXRlbSkKICAgICAgICAgICAgYm91bmRzID0gY29udHJvbGxlci5nZXRfZWxlbWVudF9ib3VuZHMoaXRlbSkKICAgICAgICAgICAgCiAgICAgICAgICAgIHByaW50KGYiUGjhuqduIHThu60ge2krMX06IikKICAgICAgICAgICAgcHJpbnQoZiIgIFRleHQ6IHt0ZXh0fSIpCiAgICAgICAgICAgIGlmIGNvbnRlbnRfZGVzYzoKICAgICAgICAgICAgICAgIHByaW50KGYiICBDb250ZW50LWRlc2M6IHtjb250ZW50X2Rlc2N9IikKICAgICAgICAgICAgaWYgcmVzb3VyY2VfaWQ6CiAgICAgICAgICAgICAgICBwcmludChmIiAgUmVzb3VyY2UgSUQ6IHtyZXNvdXJjZV9pZH0iKQogICAgICAgICAgICBwcmludChmIiAgQ2xpY2thYmxlOiB7J0PDsycgaWYgaXNfY2xpY2thYmxlIGVsc2UgJ0tow7RuZyd9IikKICAgICAgICAgICAgcHJpbnQoZiIgIEJvdW5kczoge2JvdW5kc30iKQogICAgICAgICAgICBwcmludCgiIikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIktow7RuZyB0w6xtIHRo4bqleSBwaOG6p24gdOG7rSBuw6BvISIpCiAgICAKICAgICMgUXVheSBs4bqhaSBtw6BuIGjDrG5oIGNow61uaAogICAgY29udHJvbGxlci5wcmVzc19ob21lKCkKICAgIHByaW50KCLEkMOjIGhvw6BuIHRow6BuaCBraeG7g20gdHJhIHRodeG7mWMgdMOtbmggcGjhuqduIHThu60iKQoKZGVmIHdhaXRfZm9yX2VsZW1lbnRfZXhhbXBsZSgpOgogICAgIiIiCiAgICBWw60gZOG7pSB24buBIGPDoWNoIGNo4budIMSR4bujaSBwaOG6p24gdOG7rSB4deG6pXQgaGnhu4duCiAgICAiIiIKICAgIGNvbnRyb2xsZXIgPSBIZWxwZXJTZXJ2aWNlKCkKICAgIAogICAgIyBN4bufIOG7qW5nIGThu6VuZyBDYW1lcmEKICAgIHByaW50KCLEkGFuZyBt4bufIOG7qW5nIGThu6VuZyBDYW1lcmEuLi4iKQogICAgY29udHJvbGxlci5vcGVuX2FwcCgiY29tLmFuZHJvaWQuY2FtZXJhIikKICAgIAogICAgIyBDaOG7nSDEkeG7o2kgbsO6dCBjaOG7pXAg4bqjbmggeHXhuqV0IGhp4buHbgogICAgcHJpbnQoIsSQYW5nIGNo4budIG7DunQgY2jhu6VwIOG6o25oIHh14bqldCBoaeG7h24uLi4iKQogICAgY2FwdHVyZV9idXR0b24gPSBjb250cm9sbGVyLndhaXRfZm9yX2VsZW1lbnQocmVzb3VyY2VfaWQ9ImNvbS5hbmRyb2lkLmNhbWVyYTppZC9zaHV0dGVyX2J1dHRvbiIsIHRpbWVvdXQ9MTApCiAgICAKICAgIGlmIGNhcHR1cmVfYnV0dG9uOgogICAgICAgIHByaW50KCLEkMOjIHTDrG0gdGjhuqV5IG7DunQgY2jhu6VwIOG6o25oISIpCiAgICAgICAgCiAgICAgICAgIyBDaOG7pXAg4bqjbmgKICAgICAgICBjb250cm9sbGVyLnRhcF9lbGVtZW50KGNhcHR1cmVfYnV0dG9uLmdldCgiYm91bmRzIikpCiAgICAgICAgcHJpbnQoIsSQw6MgY2jhu6VwIOG6o25oISIpCiAgICAgICAgCiAgICAgICAgIyBDaOG7nSDEkeG7o2kgY2hvIMSR4bq/biBraGkgbsO6dCB4ZW0gdHLGsOG7m2Mg4bqjbmggeHXhuqV0IGhp4buHbgogICAgICAgIHByZXZpZXdfYnV0dG9uID0gY29udHJvbGxlci53YWl0X2Zvcl9lbGVtZW50KHJlc291cmNlX2lkPSJjb20uYW5kcm9pZC5jYW1lcmE6aWQvcGhvdG9fcHJldmlldyIsIHRpbWVvdXQ9NSkKICAgICAgICAKICAgICAgICBpZiBwcmV2aWV3X2J1dHRvbjoKICAgICAgICAgICAgcHJpbnQoIsSQw6MgdMOsbSB0aOG6pXkgbsO6dCB4ZW0gdHLGsOG7m2Mg4bqjbmghIikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIktow7RuZyB0w6xtIHRo4bqleSBuw7p0IGNo4bulcCDhuqNuaCBzYXUgdGjhu51pIGdpYW4gY2jhu50hIikKICAgIAogICAgIyBRdWF5IGzhuqFpIG3DoG4gaMOsbmggY2jDrW5oCiAgICBjb250cm9sbGVyLnByZXNzX2hvbWUoKQogICAgcHJpbnQoIsSQw6MgaG/DoG4gdGjDoG5oIGNo4budIMSR4bujaSBwaOG6p24gdOG7rSIpCgpkZWYgYWR2YW5jZWRfZ2VzdHVyZXNfZXhhbXBsZSgpOgogICAgIiIiCiAgICBWw60gZOG7pSB24buBIGPDoWMgY+G7rSBjaOG7iSBuw6JuZyBjYW8gbmjGsCB2deG7kXQsIG5o4bqlbiBnaeG7rwogICAgIiIiCiAgICBjb250cm9sbGVyID0gSGVscGVyU2VydmljZSgpCiAgICAKICAgICMgTOG6pXkga8OtY2ggdGjGsOG7m2MgbcOgbiBow6xuaAogICAgd2lkdGgsIGhlaWdodCA9IGNvbnRyb2xsZXIuZ2V0X3NjcmVlbl9zaXplKCkKICAgIHByaW50KGYiS8OtY2ggdGjGsOG7m2MgbcOgbiBow6xuaDoge3dpZHRofXh7aGVpZ2h0fSIpCiAgICAKICAgICMgTeG7nyDhu6luZyBk4bulbmcgQuG6o24gxJHhu5MKICAgIHByaW50KCLEkGFuZyBt4bufIOG7qW5nIGThu6VuZyBC4bqjbiDEkeG7ky4uLiIpCiAgICBjb250cm9sbGVyLm9wZW5fYXBwKCJjb20uZ29vZ2xlLmFuZHJvaWQuYXBwcy5tYXBzIikKICAgIHRpbWUuc2xlZXAoNSkgICMgxJDhu6NpIGLhuqNuIMSR4buTIHThuqNpCiAgICAKICAgICMgVnXhu5F0IHThu6sgdHLDoWkgc2FuZyBwaOG6o2kKICAgIHByaW50KCLEkGFuZyB2deG7kXQgdOG7qyB0csOhaSBzYW5nIHBo4bqjaS4uLiIpCiAgICBjb250cm9sbGVyLnN3aXBlKHdpZHRoIC8vIDQsIGhlaWdodCAvLyAyLCB3aWR0aCAqIDMgLy8gNCwgaGVpZ2h0IC8vIDIpCiAgICB0aW1lLnNsZWVwKDEpCiAgICAKICAgICMgVnXhu5F0IHThu6sgcGjhuqNpIHNhbmcgdHLDoWkKICAgIHByaW50KCLEkGFuZyB2deG7kXQgdOG7qyBwaOG6o2kgc2FuZyB0csOhaS4uLiIpCiAgICBjb250cm9sbGVyLnN3aXBlKHdpZHRoICogMyAvLyA0LCBoZWlnaHQgLy8gMiwgd2lkdGggLy8gNCwgaGVpZ2h0IC8vIDIpCiAgICB0aW1lLnNsZWVwKDEpCiAgICAKICAgICMgTmjhuqVuIGdp4buvIHThuqFpIHRydW5nIHTDom0gbcOgbiBow6xuaAogICAgcHJpbnQoIsSQYW5nIG5o4bqlbiBnaeG7ryB04bqhaSB0cnVuZyB0w6JtIG3DoG4gaMOsbmguLi4iKQogICAgY29udHJvbGxlci5sb25nX3ByZXNzKHdpZHRoIC8vIDIsIGhlaWdodCAvLyAyLCAyMDAwKSAgIyBOaOG6pW4gZ2nhu68gMiBnacOieQogICAgdGltZS5zbGVlcCgzKQogICAgCiAgICAjIFF1YXkgbOG6oWkgbcOgbiBow6xuaCBjaMOtbmgKICAgIGNvbnRyb2xsZXIucHJlc3NfaG9tZSgpCiAgICBwcmludCgixJDDoyBob8OgbiB0aMOgbmggY8OhYyBj4butIGNo4buJIG7Dom5nIGNhbyIpCgpkZWYgbWFpbigpOgogICAgIiIiCiAgICBDaOG6oXkgdOG6pXQgY+G6oyBjw6FjIHbDrSBk4bulCiAgICAiIiIKICAgIHByaW50KCI9PT0gRVhBTVBMRVMgPT09IikKICAgIAogICAgZXhhbXBsZXMgPSB7CiAgICAgICAgIjEiOiAoIkJhc2ljIEludGVyYWN0aW9uIiwgYmFzaWNfaW50ZXJhY3Rpb25fZXhhbXBsZSksCiAgICAgICAgIjIiOiAoIkZpbmQgRWxlbWVudCIsIGZpbmRfZWxlbWVudF9leGFtcGxlKSwKICAgICAgICAiMyI6ICgiRWxlbWVudCBQcm9wZXJ0aWVzIiwgZWxlbWVudF9wcm9wZXJ0aWVzX2V4YW1wbGUpLAogICAgICAgICI0IjogKCJXYWl0IEZvciBFbGVtZW50Iiwgd2FpdF9mb3JfZWxlbWVudF9leGFtcGxlKSwKICAgICAgICAiNSI6ICgiQWR2YW5jZWQgR2VzdHVyZXMiLCBhZHZhbmNlZF9nZXN0dXJlc19leGFtcGxlKQogICAgfQogICAgCiAgICB3aGlsZSBUcnVlOgogICAgICAgIHByaW50KCJcbkNo4buNbiB2w60gZOG7pSDEkeG7gyBjaOG6oXk6IikKICAgICAgICBmb3Iga2V5LCAobmFtZSwgXykgaW4gZXhhbXBsZXMuaXRlbXMoKToKICAgICAgICAgICAgcHJpbnQoZiJ7a2V5fS4ge25hbWV9IikKICAgICAgICBwcmludCgiMC4gVGhvw6F0IikKICAgICAgICAKICAgICAgICBjaG9pY2UgPSBpbnB1dCgiTOG7sWEgY2jhu41uIGPhu6dhIGLhuqFuOiAiKQogICAgICAgIAogICAgICAgIGlmIGNob2ljZSA9PSAiMCI6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgCiAgICAgICAgaWYgY2hvaWNlIGluIGV4YW1wbGVzOgogICAgICAgICAgICBwcmludChmIlxuLS0tIFJ1bm5pbmc6IHtleGFtcGxlc1tjaG9pY2VdWzBdfSAtLS0iKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBleGFtcGxlc1tjaG9pY2VdWzFdKCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcHJpbnQoZiJM4buXaToge2V9IikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgiTOG7sWEgY2jhu41uIGtow7RuZyBo4bujcCBs4buHISIpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbigpIA==').decode('utf-8'))
