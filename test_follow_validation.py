import base64
exec(base64.b64decode('IiIiClRlc3QgdmFsaWRhdGlvbiBsb2dpYyBmb3IgZm9sbG93IGpvYnMKIiIiCmltcG9ydCBzeXMKaW1wb3J0IG9zCnN5cy5wYXRoLmFwcGVuZChvcy5wYXRoLmRpcm5hbWUob3MucGF0aC5hYnNwYXRoKF9fZmlsZV9fKSkpCgpmcm9tIHNlcnZpY2VzLmpvYl9zZXJ2aWNlIGltcG9ydCBKb2JTZXJ2aWNlCmZyb20gc2VydmljZXMuZGJfc2VydmljZSBpbXBvcnQgRGF0YWJhc2VTZXJ2aWNlCmltcG9ydCB0aW1lCgpkZWYgdGVzdF9mb2xsb3dfam9iX3ZhbGlkYXRpb24oKToKICAgICIiIlRlc3QgdmFsaWRhdGlvbiBsb2dpYyBjaG8gZm9sbG93IGpvYnMiIiIKICAgIAogICAgam9iX3NlcnZpY2UgPSBKb2JTZXJ2aWNlKCkKICAgIGRiID0gRGF0YWJhc2VTZXJ2aWNlKCkKICAgIAogICAgcHJpbnQoIlRlc3RpbmcgZm9sbG93IGpvYiB2YWxpZGF0aW9uIGxvZ2ljLi4uIikKICAgIAogICAgIyBUZXN0IHbhu5tpIGFjY291bnQgxJHDoyDEkcaw4bujYyBmaXgKICAgIGFjY291bnRzID0gZGIuZ2V0X2FjY291bnRzKCkKICAgIGRpc2FibGVkX2FjY291bnRzID0gW2FjYyBmb3IgYWNjIGluIGFjY291bnRzIGlmIGFjYy5nZXQoImRpc2FibGVfZm9sbG93IildCiAgICAKICAgIGlmIGRpc2FibGVkX2FjY291bnRzOgogICAgICAgIHRlc3RfYWNjb3VudCA9IGRpc2FibGVkX2FjY291bnRzWzBdCiAgICAgICAgYWNjb3VudF9pZCA9IHRlc3RfYWNjb3VudFsiaWQiXQogICAgICAgIHVzZXJuYW1lID0gdGVzdF9hY2NvdW50WyJ1bmlxdWVfdXNlcm5hbWUiXQogICAgICAgIAogICAgICAgIHByaW50KGYiXG5UZXN0aW5nIHdpdGggZGlzYWJsZWQgYWNjb3VudDoge3VzZXJuYW1lfSIpCiAgICAgICAgcHJpbnQoZiJkaXNhYmxlX2ZvbGxvdzoge3Rlc3RfYWNjb3VudFsnZGlzYWJsZV9mb2xsb3cnXX0iKQogICAgICAgIHByaW50KGYiZm9sbG93X2Rpc2FibGVfdW50aWw6IHt0ZXN0X2FjY291bnRbJ2ZvbGxvd19kaXNhYmxlX3VudGlsJ119IikKICAgICAgICBwcmludChmImluYWN0aXZlX2ZvbGxvd19yZWFzb246IHt0ZXN0X2FjY291bnQuZ2V0KCdpbmFjdGl2ZV9mb2xsb3dfcmVhc29uJywgJ04vQScpfSIpCiAgICAgICAgCiAgICAgICAgIyBU4bqhbyBtb2NrIGZvbGxvdyBqb2IKICAgICAgICBtb2NrX2pvYiA9IHsKICAgICAgICAgICAgImlkIjogOTk5OTk5LAogICAgICAgICAgICAiYWNjb3VudF9pZCI6IGFjY291bnRfaWQsCiAgICAgICAgICAgICJqb2JfdHlwZSI6ICJmb2xsb3ciLAogICAgICAgICAgICAib2JqZWN0X2lkIjogInRlc3RfdXNlciIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgIyBUZXN0IHZhbGlkYXRpb24KICAgICAgICB0cnk6CiAgICAgICAgICAgIGlzX3ZhbGlkID0gam9iX3NlcnZpY2UuX3ZhbGlkYXRlX2ZvbGxvd19qb2JfYmVmb3JlX2V4ZWN1dGlvbih0ZXN0X2FjY291bnQsIG1vY2tfam9iKQogICAgICAgICAgICBwcmludChmIlxuVmFsaWRhdGlvbiByZXN1bHQ6IHtpc192YWxpZH0iKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgbm90IGlzX3ZhbGlkOgogICAgICAgICAgICAgICAgcHJpbnQoIuKchSBQQVNTOiBEaXNhYmxlZCBhY2NvdW50IGNvcnJlY3RseSByZWplY3RlZCBmb2xsb3cgam9iIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KCLinYwgRkFJTDogRGlzYWJsZWQgYWNjb3VudCBpbmNvcnJlY3RseSBhY2NlcHRlZCBmb2xsb3cgam9iIikKICAgICAgICAgICAgICAgIAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoZiJFcnJvciBkdXJpbmcgdmFsaWRhdGlvbjoge2V9IikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIk5vIGRpc2FibGVkIGFjY291bnRzIGZvdW5kIGZvciB0ZXN0aW5nIikKICAgICAgICAKICAgICAgICAjIFRlc3QgduG7m2kgYWNjb3VudCBiw6xuaCB0aMaw4budbmcKICAgICAgICBhY3RpdmVfYWNjb3VudHMgPSBbYWNjIGZvciBhY2MgaW4gYWNjb3VudHMgaWYgbm90IGFjYy5nZXQoImRpc2FibGVfZm9sbG93IikgYW5kIGFjYy5nZXQoImpvYl9lbmFibGUiKV0KICAgICAgICBpZiBhY3RpdmVfYWNjb3VudHM6CiAgICAgICAgICAgIHRlc3RfYWNjb3VudCA9IGFjdGl2ZV9hY2NvdW50c1swXQogICAgICAgICAgICB1c2VybmFtZSA9IHRlc3RfYWNjb3VudFsidW5pcXVlX3VzZXJuYW1lIl0KICAgICAgICAgICAgCiAgICAgICAgICAgIHByaW50KGYiXG5UZXN0aW5nIHdpdGggYWN0aXZlIGFjY291bnQ6IHt1c2VybmFtZX0iKQogICAgICAgICAgICBwcmludChmImRpc2FibGVfZm9sbG93OiB7dGVzdF9hY2NvdW50WydkaXNhYmxlX2ZvbGxvdyddfSIpCiAgICAgICAgICAgIHByaW50KGYiam9iX2VuYWJsZToge3Rlc3RfYWNjb3VudFsnam9iX2VuYWJsZSddfSIpCiAgICAgICAgICAgIAogICAgICAgICAgICBtb2NrX2pvYiA9IHsKICAgICAgICAgICAgICAgICJpZCI6IDk5OTk5OSwKICAgICAgICAgICAgICAgICJhY2NvdW50X2lkIjogdGVzdF9hY2NvdW50WyJpZCJdLAogICAgICAgICAgICAgICAgImpvYl90eXBlIjogImZvbGxvdyIsCiAgICAgICAgICAgICAgICAib2JqZWN0X2lkIjogInRlc3RfdXNlciIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaXNfdmFsaWQgPSBqb2Jfc2VydmljZS5fdmFsaWRhdGVfZm9sbG93X2pvYl9iZWZvcmVfZXhlY3V0aW9uKHRlc3RfYWNjb3VudCwgbW9ja19qb2IpCiAgICAgICAgICAgICAgICBwcmludChmIlxuVmFsaWRhdGlvbiByZXN1bHQ6IHtpc192YWxpZH0iKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBpc192YWxpZDoKICAgICAgICAgICAgICAgICAgICBwcmludCgi4pyFIFBBU1M6IEFjdGl2ZSBhY2NvdW50IGNvcnJlY3RseSBhY2NlcHRlZCBmb2xsb3cgam9iIikKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIuKdjCBGQUlMOiBBY3RpdmUgYWNjb3VudCBpbmNvcnJlY3RseSByZWplY3RlZCBmb2xsb3cgam9iIikKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcHJpbnQoZiJFcnJvciBkdXJpbmcgdmFsaWRhdGlvbjoge2V9IikKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICB0ZXN0X2ZvbGxvd19qb2JfdmFsaWRhdGlvbigpCg==').decode('utf-8'))
