import base64
exec(base64.b64decode('IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoiIiIKVGVzdCBzY3JpcHQgxJHhu4Mga2nhu4NtIHRyYSBsb2dpYyBmb2xsb3cgbGltaXRzCiIiIgoKaW1wb3J0IGRhdGV0aW1lCmltcG9ydCB0aW1lCmltcG9ydCBzeXMKaW1wb3J0IG9zCgojIFRow6ptIHRoxrAgbeG7pWMgZ+G7kWMgdsOgbyBzeXMucGF0aApzeXMucGF0aC5pbnNlcnQoMCwgb3MucGF0aC5kaXJuYW1lKG9zLnBhdGguYWJzcGF0aChfX2ZpbGVfXykpKQoKaW1wb3J0IGNvbmZpZwpmcm9tIHNlcnZpY2VzLmRiX3NlcnZpY2UgaW1wb3J0IERhdGFiYXNlU2VydmljZQpmcm9tIHNlcnZpY2VzLmpvYl9zZXJ2aWNlIGltcG9ydCBKb2JTZXJ2aWNlCgpkZWYgdGVzdF9mb2xsb3dfbGltaXRfbG9naWMoKToKICAgICIiIlRlc3QgbG9naWMgZm9sbG93IGxpbWl0IiIiCiAgICAKICAgIHByaW50KCI9PT0gVGVzdCBGb2xsb3cgTGltaXQgTG9naWMgPT09IikKICAgIAogICAgIyBU4bqhbyBpbnN0YW5jZQogICAgZGIgPSBEYXRhYmFzZVNlcnZpY2UoKQogICAgam9iX3NlcnZpY2UgPSBKb2JTZXJ2aWNlKGRiKQogICAgCiAgICAjIEzhuqV5IG3hu5l0IHTDoGkga2hv4bqjbiB0ZXN0CiAgICBhY2NvdW50cyA9IGRiLmdldF9hY2NvdW50cyhhcHA9Imluc3RhZ3JhbSIpCiAgICBpZiBub3QgYWNjb3VudHM6CiAgICAgICAgcHJpbnQoIktow7RuZyBjw7MgdMOgaSBraG/huqNuIEluc3RhZ3JhbSDEkeG7gyB0ZXN0IikKICAgICAgICByZXR1cm4KICAgIAogICAgdGVzdF9hY2NvdW50ID0gYWNjb3VudHNbMF0KICAgIGFjY291bnRfaWQgPSB0ZXN0X2FjY291bnRbImlkIl0KICAgIHVzZXJuYW1lID0gdGVzdF9hY2NvdW50LmdldCgidW5pcXVlX3VzZXJuYW1lIiwgIlVua25vd24iKQogICAgCiAgICBwcmludChmIlRlc3QgduG7m2kgdMOgaSBraG/huqNuOiB7dXNlcm5hbWV9IChJRDoge2FjY291bnRfaWR9KSIpCiAgICAKICAgICMgVGVzdCAxOiBTaW11bGF0ZSDEkeG6oXQgZ2nhu5tpIGjhuqFuIGZvbGxvdyBuZ8OgeQogICAgcHJpbnQoIlxuLS0tIFRlc3QgMTogxJDhuqF0IGdp4bubaSBo4bqhbiBmb2xsb3cgbmfDoHkgLS0tIikKICAgIAogICAgIyBTZXQgZm9sbG93X3RvZGF5ID0gbWF4X2ZvbGxvd19kYXkKICAgIG1heF9mb2xsb3dfZGF5ID0gdGVzdF9hY2NvdW50LmdldCgibWF4X2ZvbGxvd19kYXkiLCAyMCkKICAgIGRiLnVwZGF0ZV9hY2NvdW50KGFjY291bnRfaWQsIHsKICAgICAgICAiZm9sbG93X3RvZGF5IjogbWF4X2ZvbGxvd19kYXksCiAgICAgICAgImZvbGxvd19pbl9zZXNzaW9uIjogMQogICAgfSkKICAgIAogICAgIyBSZWZyZXNoIGFjY291bnQgZGF0YQogICAgdXBkYXRlZF9hY2NvdW50ID0gZGIuZ2V0X2FjY291bnQoYWNjb3VudF9pZCkKICAgIAogICAgIyBUcmlnZ2VyIGNoZWNrIGRpc2FibGUgbG9naWMKICAgIGpvYl9zZXJ2aWNlLl9jaGVja19hbmRfZGlzYWJsZV9mb2xsb3dfYWZ0ZXJfam9iKHVwZGF0ZWRfYWNjb3VudCwgdXNlcm5hbWUpCiAgICAKICAgICMgS2nhu4NtIHRyYSBr4bq/dCBxdeG6owogICAgZmluYWxfYWNjb3VudCA9IGRiLmdldF9hY2NvdW50KGFjY291bnRfaWQpCiAgICBwcmludChmImRpc2FibGVfZm9sbG93OiB7ZmluYWxfYWNjb3VudC5nZXQoJ2Rpc2FibGVfZm9sbG93Jyl9IikKICAgIHByaW50KGYiZm9sbG93X2Rpc2FibGVfdW50aWw6IHtmaW5hbF9hY2NvdW50LmdldCgnZm9sbG93X2Rpc2FibGVfdW50aWwnKX0iKQogICAgcHJpbnQoZiJpbmFjdGl2ZV9mb2xsb3dfcmVhc29uOiB7ZmluYWxfYWNjb3VudC5nZXQoJ2luYWN0aXZlX2ZvbGxvd19yZWFzb24nKX0iKQogICAgCiAgICAjIFTDrW5oIHRo4budaSBnaWFuIGRpc2FibGUKICAgIGlmIGZpbmFsX2FjY291bnQuZ2V0KCdmb2xsb3dfZGlzYWJsZV91bnRpbCcpOgogICAgICAgIGRpc2FibGVfdW50aWxfZHQgPSBkYXRldGltZS5kYXRldGltZS5mcm9tdGltZXN0YW1wKGZpbmFsX2FjY291bnQuZ2V0KCdmb2xsb3dfZGlzYWJsZV91bnRpbCcpKQogICAgICAgIHByaW50KGYiRGlzYWJsZSDEkeG6v246IHtkaXNhYmxlX3VudGlsX2R0LnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpfSIpCiAgICAKICAgICMgVGVzdCAyOiBTaW11bGF0ZSByZXNldCBuZ8OgeQogICAgcHJpbnQoIlxuLS0tIFRlc3QgMjogUmVzZXQgbmfDoHkgLS0tIikKICAgIAogICAgIyBH4buNaSByZXNldCBkYWlseSBjb3VudGVycwogICAgam9iX3NlcnZpY2UuX3Jlc2V0X2RhaWx5X2NvdW50ZXJzKCkKICAgIAogICAgIyBLaeG7g20gdHJhIGvhur90IHF14bqjIHNhdSByZXNldAogICAgcmVzZXRfYWNjb3VudCA9IGRiLmdldF9hY2NvdW50KGFjY291bnRfaWQpCiAgICBwcmludChmIlNhdSByZXNldCAtIGZvbGxvd190b2RheToge3Jlc2V0X2FjY291bnQuZ2V0KCdmb2xsb3dfdG9kYXknKX0iKQogICAgcHJpbnQoZiJTYXUgcmVzZXQgLSBkaXNhYmxlX2ZvbGxvdzoge3Jlc2V0X2FjY291bnQuZ2V0KCdkaXNhYmxlX2ZvbGxvdycpfSIpCiAgICBwcmludChmIlNhdSByZXNldCAtIGluYWN0aXZlX2ZvbGxvd19yZWFzb246IHtyZXNldF9hY2NvdW50LmdldCgnaW5hY3RpdmVfZm9sbG93X3JlYXNvbicpfSIpCiAgICAKICAgICMgVGVzdCAzOiBTaW11bGF0ZSDEkeG6oXQgZ2nhu5tpIGjhuqFuIHNlc3Npb24KICAgIHByaW50KCJcbi0tLSBUZXN0IDM6IMSQ4bqhdCBnaeG7m2kgaOG6oW4gZm9sbG93IHNlc3Npb24gLS0tIikKICAgIAogICAgIyBSZXNldCB24buBIHRy4bqhbmcgdGjDoWkgYsOsbmggdGjGsOG7nW5nCiAgICBkYi51cGRhdGVfYWNjb3VudChhY2NvdW50X2lkLCB7CiAgICAgICAgImZvbGxvd190b2RheSI6IDEsCiAgICAgICAgImZvbGxvd19pbl9zZXNzaW9uIjogdGVzdF9hY2NvdW50LmdldCgibWF4X2ZvbGxvd19zZXNzaW9uIiwgNSksCiAgICAgICAgImRpc2FibGVfZm9sbG93IjogRmFsc2UsCiAgICAgICAgImZvbGxvd19kaXNhYmxlX3VudGlsIjogMCwKICAgICAgICAiaW5hY3RpdmVfZm9sbG93X3JlYXNvbiI6ICIiCiAgICB9KQogICAgCiAgICAjIFJlZnJlc2ggYWNjb3VudCBkYXRhCiAgICB1cGRhdGVkX2FjY291bnQgPSBkYi5nZXRfYWNjb3VudChhY2NvdW50X2lkKQogICAgCiAgICAjIFRyaWdnZXIgY2hlY2sgZGlzYWJsZSBsb2dpYwogICAgam9iX3NlcnZpY2UuX2NoZWNrX2FuZF9kaXNhYmxlX2ZvbGxvd19hZnRlcl9qb2IodXBkYXRlZF9hY2NvdW50LCB1c2VybmFtZSkKICAgIAogICAgIyBLaeG7g20gdHJhIGvhur90IHF14bqjCiAgICBmaW5hbF9hY2NvdW50ID0gZGIuZ2V0X2FjY291bnQoYWNjb3VudF9pZCkKICAgIHByaW50KGYiZGlzYWJsZV9mb2xsb3c6IHtmaW5hbF9hY2NvdW50LmdldCgnZGlzYWJsZV9mb2xsb3cnKX0iKQogICAgcHJpbnQoZiJmb2xsb3dfZGlzYWJsZV91bnRpbDoge2ZpbmFsX2FjY291bnQuZ2V0KCdmb2xsb3dfZGlzYWJsZV91bnRpbCcpfSIpCiAgICBwcmludChmImluYWN0aXZlX2ZvbGxvd19yZWFzb246IHtmaW5hbF9hY2NvdW50LmdldCgnaW5hY3RpdmVfZm9sbG93X3JlYXNvbicpfSIpCiAgICAKICAgICMgVMOtbmggdGjhu51pIGdpYW4gZGlzYWJsZQogICAgaWYgZmluYWxfYWNjb3VudC5nZXQoJ2ZvbGxvd19kaXNhYmxlX3VudGlsJyk6CiAgICAgICAgZGlzYWJsZV91bnRpbF9kdCA9IGRhdGV0aW1lLmRhdGV0aW1lLmZyb210aW1lc3RhbXAoZmluYWxfYWNjb3VudC5nZXQoJ2ZvbGxvd19kaXNhYmxlX3VudGlsJykpCiAgICAgICAgY3VycmVudF9kdCA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpCiAgICAgICAgZGlmZl9taW51dGVzID0gKGRpc2FibGVfdW50aWxfZHQgLSBjdXJyZW50X2R0KS50b3RhbF9zZWNvbmRzKCkgLyA2MAogICAgICAgIHByaW50KGYiRGlzYWJsZSDEkeG6v246IHtkaXNhYmxlX3VudGlsX2R0LnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpfSAoY8OybiB7ZGlmZl9taW51dGVzOi4wZn0gcGjDunQpIikKICAgIAogICAgcHJpbnQoIlxuPT09IFRlc3QgaG/DoG4gdGjDoG5oID09PSIpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgdGVzdF9mb2xsb3dfbGltaXRfbG9naWMoKQo=').decode('utf-8'))
