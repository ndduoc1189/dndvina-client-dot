import base64
exec(base64.b64decode('ZnJvbSBzZXJ2aWNlcy5oZWxwZXJfc2VydmljZSBpbXBvcnQgSGVscGVyU2VydmljZQppbXBvcnQgdGltZQppbXBvcnQgcmFuZG9tCmltcG9ydCBqc29uCmltcG9ydCBvcwpmcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgQW55CmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCgpjbGFzcyBUaWtUb2tCb3Q6CiAgICAiIiIKICAgIEJvdCB04buxIMSR4buZbmcgdMawxqFuZyB0w6FjIHbhu5tpIFRpa1RvawogICAgIiIiCiAgICAKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBiYXNlX3VybDogc3RyID0gImh0dHA6Ly8xMC4xLjAuMTg5Ojg5OTAvIik6CiAgICAgICAgc2VsZi5jb250cm9sbGVyID0gSGVscGVyU2VydmljZShiYXNlX3VybCkKICAgICAgICBzZWxmLnBhY2thZ2VfbmFtZSA9ICJjb20uc3MuYW5kcm9pZC51Z2MudHJpbGwiCiAgICAgICAgc2VsZi5zdGF0cyA9IHsKICAgICAgICAgICAgInZpZGVvc193YXRjaGVkIjogMCwKICAgICAgICAgICAgInZpZGVvc19saWtlZCI6IDAsCiAgICAgICAgICAgICJjb21tZW50c19tYWRlIjogMCwKICAgICAgICAgICAgInByb2ZpbGVzX3Zpc2l0ZWQiOiAwLAogICAgICAgICAgICAic3RhcnRfdGltZSI6IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIpCiAgICAgICAgfQogICAgCiAgICBkZWYgbGF1bmNoX3Rpa3RvayhzZWxmKSAtPiBib29sOgogICAgICAgICIiIgogICAgICAgIE3hu58g4bupbmcgZOG7pW5nIFRpa1RvayB2w6AgxJHhuqNtIGLhuqNvIMSRw6MgdsOgbyBtw6BuIGjDrG5oIGNow61uaAogICAgICAgICIiIgogICAgICAgIHByaW50KCLEkGFuZyBt4bufIFRpa1Rvay4uLiIpCiAgICAgICAgcmVzdWx0ID0gc2VsZi5jb250cm9sbGVyLm9wZW5fYXBwKHNlbGYucGFja2FnZV9uYW1lKQogICAgICAgIAogICAgICAgIGlmIHJlc3VsdFsic3RhdHVzIl0gIT0gInN1Y2Nlc3MiOgogICAgICAgICAgICBwcmludCgiS2jDtG5nIHRo4buDIG3hu58gVGlrVG9rISIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgICMgQ2jhu50gxJHhu6NpIGNobyDEkeG6v24ga2hpIG7DunQgIlRyYW5nIGNo4bunIiB4deG6pXQgaGnhu4duCiAgICAgICAgcHJpbnQoIsSQYW5nIGNo4budIG3DoG4gaMOsbmggY2jDrW5oIFRpa1Rvay4uLiIpCiAgICAgICAgaG9tZV9idXR0b24gPSBzZWxmLmNvbnRyb2xsZXIud2FpdF9mb3JfZWxlbWVudChjb250ZW50X2Rlc2M9IlRyYW5nIGNo4bunIikKICAgICAgICAKICAgICAgICBpZiBub3QgaG9tZV9idXR0b246CiAgICAgICAgICAgIHByaW50KCJLaMO0bmcgdMOsbSB0aOG6pXkgbcOgbiBow6xuaCBjaMOtbmggVGlrVG9rISIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgICMgS2nhu4NtIHRyYSB4ZW0gbsO6dCBUcmFuZyBjaOG7pyBjw7MgxJHGsOG7o2MgY2jhu41uIGtow7RuZwogICAgICAgIGlmIG5vdCBzZWxmLmNvbnRyb2xsZXIuaXNfZWxlbWVudF9zZWxlY3RlZChob21lX2J1dHRvbik6CiAgICAgICAgICAgIHByaW50KCLEkGFuZyBuaOG6pXAgdsOgbyBuw7p0IFRyYW5nIGNo4bunLi4uIikKICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLnRhcF9lbGVtZW50KGhvbWVfYnV0dG9uLmdldCgiYm91bmRzIikpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAKICAgICAgICBwcmludCgixJDDoyB2w6BvIG3DoG4gaMOsbmggY2jDrW5oIFRpa1RvayB0aMOgbmggY8O0bmchIikKICAgICAgICByZXR1cm4gVHJ1ZQogICAgCiAgICBkZWYgd2F0Y2hfdmlkZW9zKHNlbGYsIGNvdW50OiBpbnQgPSAxMCwgbGlrZV9wcm9iYWJpbGl0eTogZmxvYXQgPSAwLjMsCiAgICAgICAgICAgICAgICAgICBjb21tZW50X3Byb2JhYmlsaXR5OiBmbG9hdCA9IDAuMSwgZm9sbG93X3Byb2JhYmlsaXR5OiBmbG9hdCA9IDAuMDUpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgWGVtIG3hu5l0IHPhu5EgbMaw4bujbmcgdmlkZW8sIHbhu5tpIHjDoWMgc3XhuqV0IHRow61jaCwgYsOsbmggbHXhuq1uIHbDoCB0aGVvIGTDtWkKICAgICAgICAiIiIKICAgICAgICBwcmludChmIkLhuq90IMSR4bqndSB4ZW0ge2NvdW50fSB2aWRlby4uLiIpCiAgICAgICAgCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoY291bnQpOgogICAgICAgICAgICBwcmludChmIsSQYW5nIHhlbSB2aWRlbyB0aOG7qSB7aSsxfS97Y291bnR9Li4uIikKICAgICAgICAgICAgCiAgICAgICAgICAgICMgWGVtIHZpZGVvIHRyb25nIGtob+G6o25nIDUtMTUgZ2nDonkKICAgICAgICAgICAgdmlld190aW1lID0gcmFuZG9tLnVuaWZvcm0oNSwgMTUpCiAgICAgICAgICAgIHRpbWUuc2xlZXAodmlld190aW1lKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBUaMOtY2ggdmlkZW8gduG7m2kgeMOhYyBzdeG6pXQgbGlrZV9wcm9iYWJpbGl0eQogICAgICAgICAgICBpZiByYW5kb20ucmFuZG9tKCkgPCBsaWtlX3Byb2JhYmlsaXR5OgogICAgICAgICAgICAgICAgc2VsZi5fbGlrZV9jdXJyZW50X3ZpZGVvKCkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgQsOsbmggbHXhuq1uIHbhu5tpIHjDoWMgc3XhuqV0IGNvbW1lbnRfcHJvYmFiaWxpdHkKICAgICAgICAgICAgaWYgcmFuZG9tLnJhbmRvbSgpIDwgY29tbWVudF9wcm9iYWJpbGl0eToKICAgICAgICAgICAgICAgIHNlbGYuX2NvbW1lbnRfb25fdmlkZW8oKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBUaGVvIGTDtWkgbmfGsOG7nWkgZMO5bmcgduG7m2kgeMOhYyBzdeG6pXQgZm9sbG93X3Byb2JhYmlsaXR5CiAgICAgICAgICAgIGlmIHJhbmRvbS5yYW5kb20oKSA8IGZvbGxvd19wcm9iYWJpbGl0eToKICAgICAgICAgICAgICAgIHNlbGYuX2ZvbGxvd191c2VyKCkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgVnXhu5F0IGzDqm4gxJHhu4MgeGVtIHZpZGVvIHRp4bq/cCB0aGVvCiAgICAgICAgICAgIHByaW50KCJDaHV54buDbiBzYW5nIHZpZGVvIHRp4bq/cCB0aGVvLi4uIikKICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLnN3aXBlX3VwKCkKICAgICAgICAgICAgdGltZS5zbGVlcCgyKSAgIyDEkOG7o2kgdmlkZW8gdOG6o2kKICAgICAgICAgICAgCiAgICAgICAgICAgIHNlbGYuc3RhdHNbInZpZGVvc193YXRjaGVkIl0gKz0gMQogICAgCiAgICBkZWYgX2xpa2VfY3VycmVudF92aWRlbyhzZWxmKSAtPiBib29sOgogICAgICAgICIiIgogICAgICAgIFRow61jaCB2aWRlbyDEkWFuZyB4ZW0KICAgICAgICAiIiIKICAgICAgICBwcmludCgixJBhbmcgdGjDrWNoIHZpZGVvLi4uIikKICAgICAgICAKICAgICAgICAjIFTDrG0gbsO6dCB0aMOtY2ggKGPDsyB0aOG7gyBsw6AgYmnhu4N1IHTGsOG7o25nIHRyw6FpIHRpbSkKICAgICAgICBsaWtlX2J1dHRvbiA9IHNlbGYuY29udHJvbGxlci5maW5kX2VsZW1lbnQoY29udGVudF9kZXNjPSJUaMOtY2giKQogICAgICAgIAogICAgICAgIGlmIGxpa2VfYnV0dG9uOgogICAgICAgICAgICAjIEtp4buDbSB0cmEgeGVtIHZpZGVvIMSRw6MgxJHGsOG7o2MgdGjDrWNoIGNoxrBhCiAgICAgICAgICAgIGlmIG5vdCBzZWxmLmNvbnRyb2xsZXIuaXNfZWxlbWVudF9zZWxlY3RlZChsaWtlX2J1dHRvbik6CiAgICAgICAgICAgICAgICBzZWxmLmNvbnRyb2xsZXIudGFwX2VsZW1lbnQobGlrZV9idXR0b24uZ2V0KCJib3VuZHMiKSkKICAgICAgICAgICAgICAgIHByaW50KCLEkMOjIHRow61jaCB2aWRlbyEiKQogICAgICAgICAgICAgICAgc2VsZi5zdGF0c1sidmlkZW9zX2xpa2VkIl0gKz0gMQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KCJWaWRlbyDEkcOjIMSRxrDhu6NjIHRow61jaCB04burIHRyxrDhu5tjISIpCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAKICAgICAgICBwcmludCgiS2jDtG5nIHTDrG0gdGjhuqV5IG7DunQgdGjDrWNoISIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIGRlZiBfY29tbWVudF9vbl92aWRlbyhzZWxmKSAtPiBib29sOgogICAgICAgICIiIgogICAgICAgIELDrG5oIGx14bqtbiB2w6BvIHZpZGVvIMSRYW5nIHhlbQogICAgICAgICIiIgogICAgICAgIHByaW50KCLEkGFuZyBiw6xuaCBsdeG6rW4gdmlkZW8uLi4iKQogICAgICAgIAogICAgICAgICMgRGFuaCBzw6FjaCBiw6xuaCBsdeG6rW4gbmfhuqt1IG5oacOqbgogICAgICAgIGNvbW1lbnRzID0gWwogICAgICAgICAgICAiSGF5IHF1w6EhIPCfkY0iLAogICAgICAgICAgICAiVmlkZW8gcuG6pXQgdGjDuiB24buLIiwKICAgICAgICAgICAgIkPhuqNtIMahbiB2w6wgxJHDoyBjaGlhIHPhursiLAogICAgICAgICAgICAiVHV54buHdCB24budaSEg8J+YjSIsCiAgICAgICAgICAgICJS4bqldCBo4buvdSDDrWNoIiwKICAgICAgICAgICAgIkNoaWEgc+G6uyBoYXkgbOG6r20iLAogICAgICAgICAgICAiUXXDoSDEkeG7iW5oISDwn5SlIiwKICAgICAgICAgICAgIkPhuqNtIMahbiBi4bqhbiIsCiAgICAgICAgICAgICJUaMOtY2ggdmlkZW8gbsOgeSIsCiAgICAgICAgICAgICJS4bqldCBoYXkhIOKdpO+4jyIKICAgICAgICBdCiAgICAgICAgCiAgICAgICAgIyBUw6xtIG7DunQgYsOsbmggbHXhuq1uCiAgICAgICAgY29tbWVudF9idXR0b24gPSBzZWxmLmNvbnRyb2xsZXIuZmluZF9lbGVtZW50KGNvbnRlbnRfZGVzYz0iQsOsbmggbHXhuq1uIikKICAgICAgICAKICAgICAgICBpZiBjb21tZW50X2J1dHRvbjoKICAgICAgICAgICAgIyBOaOG6pXAgdsOgbyBuw7p0IGLDrG5oIGx14bqtbgogICAgICAgICAgICBzZWxmLmNvbnRyb2xsZXIudGFwX2VsZW1lbnQoY29tbWVudF9idXR0b24uZ2V0KCJib3VuZHMiKSkKICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBUw6xtIMO0IG5o4bqtcCBiw6xuaCBsdeG6rW4KICAgICAgICAgICAgY29tbWVudF9pbnB1dCA9IHNlbGYuY29udHJvbGxlci5maW5kX2VsZW1lbnQodGV4dD0iVGjDqm0gYsOsbmggbHXhuq1uLi4uIikKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGNvbW1lbnRfaW5wdXQ6CiAgICAgICAgICAgICAgICAjIE5o4bqlcCB2w6BvIMO0IG5o4bqtcCBiw6xuaCBsdeG6rW4KICAgICAgICAgICAgICAgIHNlbGYuY29udHJvbGxlci50YXBfZWxlbWVudChjb21tZW50X2lucHV0LmdldCgiYm91bmRzIikpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgTmjhuq1wIGLDrG5oIGx14bqtbiBuZ+G6q3Ugbmhpw6puCiAgICAgICAgICAgICAgICBjb21tZW50ID0gcmFuZG9tLmNob2ljZShjb21tZW50cykKICAgICAgICAgICAgICAgIHNlbGYuY29udHJvbGxlci5pbnB1dF90ZXh0KGNvbW1lbnQpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgVMOsbSBuw7p0IGfhu61pCiAgICAgICAgICAgICAgICBzZW5kX2J1dHRvbiA9IHNlbGYuY29udHJvbGxlci5maW5kX2VsZW1lbnQodGV4dD0iR+G7rWkiKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBzZW5kX2J1dHRvbjoKICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnRyb2xsZXIudGFwX2VsZW1lbnQoc2VuZF9idXR0b24uZ2V0KCJib3VuZHMiKSkKICAgICAgICAgICAgICAgICAgICBwcmludChmIsSQw6MgYsOsbmggbHXhuq1uOiAne2NvbW1lbnR9JyIpCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zdGF0c1siY29tbWVudHNfbWFkZSJdICs9IDEKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAjIMSQw7NuZyBwaOG6p24gYsOsbmggbHXhuq1uCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICAgICAgICAgIHNlbGYuY29udHJvbGxlci5wcmVzc19iYWNrKCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICAKICAgICAgICAgICAgIyBO4bq/dSBraMO0bmcgdGjDoG5oIGPDtG5nLCBxdWF5IGzhuqFpIG3DoG4gaMOsbmggdmlkZW8KICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLnByZXNzX2JhY2soKQogICAgICAgIAogICAgICAgIHByaW50KCJLaMO0bmcgdGjhu4MgYsOsbmggbHXhuq1uISIpCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIGRlZiBfZm9sbG93X3VzZXIoc2VsZikgLT4gYm9vbDoKICAgICAgICAiIiIKICAgICAgICBUaGVvIGTDtWkgbmfGsOG7nWkgZMO5bmcgY+G7p2EgdmlkZW8gxJFhbmcgeGVtCiAgICAgICAgIiIiCiAgICAgICAgcHJpbnQoIsSQYW5nIHRoZW8gZMO1aSBuZ8aw4budaSBkw7luZy4uLiIpCiAgICAgICAgCiAgICAgICAgIyBUw6xtIG7DunQgdGhlbyBkw7VpIGhv4bq3YyB0w6puIG5nxrDhu51pIGTDuW5nCiAgICAgICAgcHJvZmlsZV9lbGVtZW50ID0gc2VsZi5jb250cm9sbGVyLmZpbmRfZWxlbWVudChjb250ZW50X2Rlc2M9Ikjhu5Mgc8ahIG5nxrDhu51pIGTDuW5nIikKICAgICAgICAKICAgICAgICBpZiBwcm9maWxlX2VsZW1lbnQ6CiAgICAgICAgICAgICMgTmjhuqVwIHbDoG8gaOG7kyBzxqEgbmfGsOG7nWkgZMO5bmcKICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLnRhcF9lbGVtZW50KHByb2ZpbGVfZWxlbWVudC5nZXQoImJvdW5kcyIpKQogICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIEtp4buDbSB0cmEgbsO6dCB0aGVvIGTDtWkKICAgICAgICAgICAgZm9sbG93X2J1dHRvbiA9IHNlbGYuY29udHJvbGxlci5maW5kX2VsZW1lbnQodGV4dD0iVGhlbyBkw7VpIikKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGZvbGxvd19idXR0b246CiAgICAgICAgICAgICAgICBzZWxmLmNvbnRyb2xsZXIudGFwX2VsZW1lbnQoZm9sbG93X2J1dHRvbi5nZXQoImJvdW5kcyIpKQogICAgICAgICAgICAgICAgcHJpbnQoIsSQw6MgdGhlbyBkw7VpIG5nxrDhu51pIGTDuW5nISIpCiAgICAgICAgICAgICAgICBzZWxmLnN0YXRzWyJwcm9maWxlc192aXNpdGVkIl0gKz0gMQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIFF1YXkgbOG6oWkgbcOgbiBow6xuaCB2aWRlbwogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLnByZXNzX2JhY2soKQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICMgQ8OzIHRo4buDIMSRw6MgdGhlbyBkw7VpIHLhu5NpIGhv4bq3YyBraMO0bmcgdMOsbSB0aOG6pXkgbsO6dAogICAgICAgICAgICAgICAgcHJpbnQoIktow7RuZyB0aOG7gyB0aGVvIGTDtWkgaG/hurdjIMSRw6MgdGhlbyBkw7VpIHThu6sgdHLGsOG7m2MhIikKICAgICAgICAgICAgICAgIHNlbGYuY29udHJvbGxlci5wcmVzc19iYWNrKCkKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIAogICAgICAgIHByaW50KCJLaMO0bmcgdMOsbSB0aOG6pXkgaOG7kyBzxqEgbmfGsOG7nWkgZMO5bmchIikKICAgICAgICByZXR1cm4gRmFsc2UKICAgIAogICAgZGVmIGV4cGxvcmVfdHJlbmRpbmcoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICBLaMOhbSBwaMOhIHRhYiBYdSBoxrDhu5tuZwogICAgICAgICIiIgogICAgICAgIHByaW50KCLEkGFuZyBjaHV54buDbiDEkeG6v24gdGFiIEtow6FtIHBow6EuLi4iKQogICAgICAgIAogICAgICAgICMgVMOsbSB0YWIgS2jDoW0gcGjDoQogICAgICAgIGRpc2NvdmVyX3RhYiA9IHNlbGYuY29udHJvbGxlci5maW5kX2VsZW1lbnQoY29udGVudF9kZXNjPSJLaMOhbSBwaMOhIikKICAgICAgICAKICAgICAgICBpZiBkaXNjb3Zlcl90YWI6CiAgICAgICAgICAgIHNlbGYuY29udHJvbGxlci50YXBfZWxlbWVudChkaXNjb3Zlcl90YWIuZ2V0KCJib3VuZHMiKSkKICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICAKICAgICAgICAgICAgcHJpbnQoIsSQYW5nIGtow6FtIHBow6EgY8OhYyB4dSBoxrDhu5tuZy4uLiIpCiAgICAgICAgICAgIAogICAgICAgICAgICAjIFZ14buRdCB4deG7kW5nIMSR4buDIHhlbSBjw6FjIHh1IGjGsOG7m25nCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDMpOgogICAgICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLnN3aXBlX2Rvd24oKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBDaOG7jW4gbeG7mXQgeHUgaMaw4bubbmcgbmfhuqt1IG5oacOqbgogICAgICAgICAgICB0cmVuZGluZ19pdGVtcyA9IHNlbGYuY29udHJvbGxlci5maW5kX2FsbF9lbGVtZW50cyhjbGFzc19uYW1lPSJhbmRyb2lkLndpZGdldC5GcmFtZUxheW91dCIpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiB0cmVuZGluZ19pdGVtcyBhbmQgbGVuKHRyZW5kaW5nX2l0ZW1zKSA+IDI6CiAgICAgICAgICAgICAgICAjIENo4buNbiBt4buZdCBpdGVtIG5n4bqrdSBuaGnDqm4gKGLhu48gcXVhIGPDoWMgcGjhuqduIHThu60gxJHhuqd1IHRpw6puIHbDrCBjw7MgdGjhu4MgbMOgIFVJIGtow6FjKQogICAgICAgICAgICAgICAgcmFuZG9tX2l0ZW0gPSByYW5kb20uY2hvaWNlKHRyZW5kaW5nX2l0ZW1zWzI6XSkKICAgICAgICAgICAgICAgIHNlbGYuY29udHJvbGxlci50YXBfZWxlbWVudChyYW5kb21faXRlbS5nZXQoImJvdW5kcyIpKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIFhlbSBt4buZdCB2w6BpIHZpZGVvIHRyb25nIHh1IGjGsOG7m25nCiAgICAgICAgICAgICAgICBzZWxmLndhdGNoX3ZpZGVvcyhjb3VudD0zKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIFF1YXkgbOG6oWkgdGFiIEtow6FtIHBow6EKICAgICAgICAgICAgICAgIHNlbGYuY29udHJvbGxlci5wcmVzc19iYWNrKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgiS2jDtG5nIHTDrG0gdGjhuqV5IHRhYiBLaMOhbSBwaMOhISIpCiAgICAKICAgIGRlZiBzZWFyY2hfaGFzaHRhZyhzZWxmLCBoYXNodGFnOiBzdHIpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgVMOsbSBraeG6v20gdsOgIHhlbSB2aWRlbyB0aGVvIGhhc2h0YWcKICAgICAgICAiIiIKICAgICAgICBwcmludChmIsSQYW5nIHTDrG0ga2nhur9tIGhhc2h0YWcgI3toYXNodGFnfS4uLiIpCiAgICAgICAgCiAgICAgICAgIyBUw6xtIHRhYiBLaMOhbSBwaMOhICh0aMaw4budbmcgY8OzIGNo4bupYyBuxINuZyB0w6xtIGtp4bq/bSkKICAgICAgICBkaXNjb3Zlcl90YWIgPSBzZWxmLmNvbnRyb2xsZXIuZmluZF9lbGVtZW50KGNvbnRlbnRfZGVzYz0iS2jDoW0gcGjDoSIpCiAgICAgICAgCiAgICAgICAgaWYgZGlzY292ZXJfdGFiOgogICAgICAgICAgICBzZWxmLmNvbnRyb2xsZXIudGFwX2VsZW1lbnQoZGlzY292ZXJfdGFiLmdldCgiYm91bmRzIikpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICAgICAgCiAgICAgICAgICAgICMgVMOsbSDDtCB0w6xtIGtp4bq/bQogICAgICAgICAgICBzZWFyY2hfYm94ID0gc2VsZi5jb250cm9sbGVyLmZpbmRfZWxlbWVudCh0ZXh0PSJUw6xtIGtp4bq/bSIpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiBzZWFyY2hfYm94OgogICAgICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLnRhcF9lbGVtZW50KHNlYXJjaF9ib3guZ2V0KCJib3VuZHMiKSkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBOaOG6rXAgaGFzaHRhZwogICAgICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLmlucHV0X3RleHQoaGFzaHRhZykKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIyBOaOG6pW4gRW50ZXIgxJHhu4MgdMOsbSBraeG6v20KICAgICAgICAgICAgICAgIHNlbGYuY29udHJvbGxlci5pbnB1dF90ZXh0KCJcbiIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgVMOsbSB2w6AgbmjhuqVwIHbDoG8ga+G6v3QgcXXhuqMgaGFzaHRhZwogICAgICAgICAgICAgICAgaGFzaHRhZ19yZXN1bHQgPSBzZWxmLmNvbnRyb2xsZXIuZmluZF9lbGVtZW50KHRleHQ9ZiIje2hhc2h0YWd9IikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgaGFzaHRhZ19yZXN1bHQ6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb250cm9sbGVyLnRhcF9lbGVtZW50KGhhc2h0YWdfcmVzdWx0LmdldCgiYm91bmRzIikpCiAgICAgICAgICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICMgWGVtIG3hu5l0IHPhu5EgdmlkZW8gduG7m2kgaGFzaHRhZyBuw6B5CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLEkGFuZyB4ZW0gdmlkZW8gduG7m2kgaGFzaHRhZyAje2hhc2h0YWd9Li4uIikKICAgICAgICAgICAgICAgICAgICBzZWxmLndhdGNoX3ZpZGVvcyhjb3VudD01KQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICMgUXVheSBs4bqhaSBtw6BuIGjDrG5oIGNow61uaAogICAgICAgICAgICAgICAgICAgIHNlbGYuY29udHJvbGxlci5wcmVzc19iYWNrKCkKICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnRyb2xsZXIucHJlc3NfYmFjaygpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYiS2jDtG5nIHTDrG0gdGjhuqV5IGvhur90IHF14bqjIGNobyBoYXNodGFnICN7aGFzaHRhZ30hIikKICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnRyb2xsZXIucHJlc3NfYmFjaygpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgiS2jDtG5nIHTDrG0gdGjhuqV5IMO0IHTDrG0ga2nhur9tISIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoIktow7RuZyB0w6xtIHRo4bqleSB0YWIgS2jDoW0gcGjDoSEiKQogICAgCiAgICBkZWYgc2F2ZV9zdGF0cyhzZWxmLCBmaWxlX3BhdGg6IHN0ciA9ICJ0aWt0b2tfYm90X3N0YXRzLmpzb24iKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIEzGsHUgdGjhu5FuZyBrw6ogaG/huqF0IMSR4buZbmcgY+G7p2EgYm90CiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5zdGF0c1siZW5kX3RpbWUiXSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSDolTTolUyIpCiAgICAgICAgCiAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgInciLCBlbmNvZGluZz0idXRmLTgiKSBhcyBmOgogICAgICAgICAgICBqc29uLmR1bXAoc2VsZi5zdGF0cywgZiwgaW5kZW50PTQpCiAgICAgICAgCiAgICAgICAgcHJpbnQoZiLEkMOjIGzGsHUgdGjhu5FuZyBrw6ogdsOgbyBmaWxlIHtmaWxlX3BhdGh9IikKICAgICAgICBwcmludChmIlThu5VuZyBz4buRIHZpZGVvIMSRw6MgeGVtOiB7c2VsZi5zdGF0c1sndmlkZW9zX3dhdGNoZWQnXX0iKQogICAgICAgIHByaW50KGYiVOG7lW5nIHPhu5EgdmlkZW8gxJHDoyB0aMOtY2g6IHtzZWxmLnN0YXRzWyd2aWRlb3NfbGlrZWQnXX0iKQogICAgICAgIHByaW50KGYiVOG7lW5nIHPhu5EgYsOsbmggbHXhuq1uIMSRw6MgxJHEg25nOiB7c2VsZi5zdGF0c1snY29tbWVudHNfbWFkZSddfSIpCiAgICAgICAgcHJpbnQoZiJU4buVbmcgc+G7kSBo4buTIHPGoSDEkcOjIHRydXkgY+G6rXA6IHtzZWxmLnN0YXRzWydwcm9maWxlc192aXNpdGVkJ119IikKCiMgQ2jhuqF5IGJvdCBUaWtUb2sKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGJvdCA9IFRpa1Rva0JvdCgpCiAgICAKICAgIHRyeToKICAgICAgICAjIEto4bufaSDEkeG7mW5nIFRpa1RvawogICAgICAgIGlmIGJvdC5sYXVuY2hfdGlrdG9rKCk6CiAgICAgICAgICAgICMgWGVtIG3hu5l0IHPhu5EgdmlkZW8gdHLDqm4gRm9yIFlvdSBQYWdlCiAgICAgICAgICAgIGJvdC53YXRjaF92aWRlb3MoY291bnQ9NSkKICAgICAgICAgICAgCiAgICAgICAgICAgICMgS2jDoW0gcGjDoSB0YWIgeHUgaMaw4bubbmcKICAgICAgICAgICAgYm90LmV4cGxvcmVfdHJlbmRpbmcoKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBUw6xtIGtp4bq/bSB2w6AgeGVtIHZpZGVvIHRoZW8gaGFzaHRhZwogICAgICAgICAgICBib3Quc2VhcmNoX2hhc2h0YWcoInZpZXRuYW0iKQogICAgICAgICAgICAKICAgICAgICAgICAgIyBRdWF5IGzhuqFpIEZvciBZb3UgUGFnZSB2w6AgeGVtIHRow6ptIHZpZGVvCiAgICAgICAgICAgIGlmIGJvdC5sYXVuY2hfdGlrdG9rKCk6ICAjIMSQ4bqjbSBi4bqjbyBxdWF5IGzhuqFpIG3DoG4gaMOsbmggY2jDrW5oCiAgICAgICAgICAgICAgICBib3Qud2F0Y2hfdmlkZW9zKGNvdW50PTUpCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoZiJM4buXaToge2V9IikKICAgIGZpbmFsbHk6CiAgICAgICAgIyBMxrB1IHRo4buRbmcga8OqCiAgICAgICAgYm90LnNhdmVfc3RhdHMoKQogICAgICAgIHByaW50KCJCb3QgxJHDoyBob8OgbiB0aMOgbmggY8O0bmcgdmnhu4djISIp').decode('utf-8'))
