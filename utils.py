import base64
exec(base64.b64decode('aW1wb3J0IHRpbWUKaW1wb3J0IHJlcXVlc3RzCmZyb20gdHlwaW5nIGltcG9ydCBEaWN0LCBBbnksIE9wdGlvbmFsLCBUdXBsZSwgRGljdCwgTGlzdAppbXBvcnQgY29uZmlnCmltcG9ydCBvcwppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHN5cwppbXBvcnQgdHJhY2ViYWNrCmltcG9ydCBqc29uCmltcG9ydCBsb2dnaW5nCmltcG9ydCBzdWJwcm9jZXNzCmZyb20gZW51bSBpbXBvcnQgRW51bQoKIyBUaGVvIGTDtWkgdOG6pXQgY+G6oyBjw6FjIGxvZ2dlciDEkcOjIHThuqFvCmFsbF9sb2dnZXJzOiBEaWN0W3N0ciwgJ0xvZ2dlciddID0ge30KCiMgQmnhur9uIHRvw6BuIGPhu6VjIMSR4buDIGzGsHUgdHLhuqFuZyB0aMOhaQpoZWxwZXJfYXZhaWxhYmxlID0gRmFsc2UKbmV0d29ya19hdmFpbGFibGUgPSBGYWxzZQoKIyDEkOG7i25oIG5naMSpYSBjw6FjIGxldmVsIGxvZwpjbGFzcyBMb2dMZXZlbChFbnVtKToKICAgIERFQlVHID0gbG9nZ2luZy5ERUJVRwogICAgSU5GTyA9IGxvZ2dpbmcuSU5GTwogICAgV0FSTklORyA9IGxvZ2dpbmcuV0FSTklORwogICAgRVJST1IgPSBsb2dnaW5nLkVSUk9SCiAgICBDUklUSUNBTCA9IGxvZ2dpbmcuQ1JJVElDQUwKCiMgQ+G6pXUgaMOsbmggbG9nZ2VyCmxvZ2dpbmcuYmFzaWNDb25maWcoCiAgICBsZXZlbD1sb2dnaW5nLklORk8sCiAgICBmb3JtYXQ9JyUobmFtZSlzIC0gJShsZXZlbG5hbWUpcyAtICUobWVzc2FnZSlzJywKICAgIGhhbmRsZXJzPVsKICAgICAgICBsb2dnaW5nLlN0cmVhbUhhbmRsZXIoKSwKICAgICAgICBsb2dnaW5nLkZpbGVIYW5kbGVyKCdhcHAubG9nJywgZW5jb2Rpbmc9J3V0Zi04JykKICAgIF0KKQoKY2xhc3MgTG9nZ2VyOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUpOgogICAgICAgIHNlbGYubG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIobmFtZSkKICAgICAgICAKICAgIGRlZiBkZWJ1ZyhzZWxmLCBtZXNzYWdlKToKICAgICAgICBzZWxmLmxvZ2dlci5kZWJ1ZyhtZXNzYWdlKQogICAgICAgIAogICAgZGVmIGluZm8oc2VsZiwgbWVzc2FnZSk6CiAgICAgICAgc2VsZi5sb2dnZXIuaW5mbyhtZXNzYWdlKQogICAgICAgIAogICAgZGVmIHdhcm5pbmcoc2VsZiwgbWVzc2FnZSk6CiAgICAgICAgc2VsZi5sb2dnZXIud2FybmluZyhtZXNzYWdlKQogICAgICAgIAogICAgZGVmIGVycm9yKHNlbGYsIG1lc3NhZ2UpOgogICAgICAgIHNlbGYubG9nZ2VyLmVycm9yKG1lc3NhZ2UpCiAgICAgICAgCiAgICBkZWYgY3JpdGljYWwoc2VsZiwgbWVzc2FnZSk6CiAgICAgICAgc2VsZi5sb2dnZXIuY3JpdGljYWwobWVzc2FnZSkKICAgICAgICAKICAgIGRlZiBleGNlcHRpb24oc2VsZiwgZSwgbWVzc2FnZT0iRXhjZXB0aW9uIG9jY3VycmVkIik6CiAgICAgICAgc2VsZi5sb2dnZXIuZXhjZXB0aW9uKGYie21lc3NhZ2V9OiB7c3RyKGUpfSIpCgojIFThuqFvIGxvZ2dlciBt4bq3YyDEkeG7i25oIGNobyBtb2R1bGUgdXRpbHMKbG9nZ2VyID0gTG9nZ2VyKCJVdGlscyIpCgpkZWYgc2V0X2FsbF9sb2dnZXJzX2xldmVsKGxldmVsOiBpbnQpOgogICAgIiIiCiAgICBDw6BpIMSR4bq3dCBj4bqlcCDEkeG7mSBsb2cgY2hvIHThuqV0IGPhuqMgY8OhYyBsb2dnZXIgxJHDoyB04bqhbwogICAgCiAgICBBcmdzOgogICAgICAgIGxldmVsOiBD4bqlcCDEkeG7mSBsb2cgdOG7kWkgdGhp4buDdSAoTG9nTGV2ZWwuREVCVUcsIExvZ0xldmVsLklORk8sIExvZ0xldmVsLkVSUk9SKQogICAgIiIiCiAgICBmb3IgbG9nZ2VyX25hbWUsIGxvZ2dlcl9pbnN0YW5jZSBpbiBhbGxfbG9nZ2Vycy5pdGVtcygpOgogICAgICAgIGxvZ2dlcl9pbnN0YW5jZS5zZXRfbGV2ZWwobGV2ZWwpCiAgICAgICAgCmRlZiBzZXR1cF9kZWZhdWx0X2xvZ2dpbmcocHJvZHVjdGlvbjogYm9vbCA9IEZhbHNlLCBsb2dfdG9fZmlsZTogYm9vbCA9IEZhbHNlKToKICAgICIiIgogICAgVGhp4bq/dCBs4bqtcCBj4bqldSBow6xuaCBsb2cgbeG6t2MgxJHhu4tuaCBjaG8g4bupbmcgZOG7pW5nCiAgICAKICAgIEFyZ3M6CiAgICAgICAgcHJvZHVjdGlvbjogVHJ1ZSBu4bq/dSDEkWFuZyBjaOG6oXkgdHJvbmcgbcO0aSB0csaw4budbmcgcHJvZHVjdGlvbiAoY2jhu4kgbG9nIHThu6sgSU5GTyB0cuG7nyBsw6puKQogICAgICAgIGxvZ190b19maWxlOiBUcnVlIMSR4buDIGdoaSBsb2cgcmEgZmlsZQogICAgIiIiCiAgICBsZXZlbCA9IExvZ0xldmVsLklORk8gaWYgcHJvZHVjdGlvbiBlbHNlIExvZ0xldmVsLkRFQlVHCiAgICAKICAgICMgxJDhurd0IGxldmVsIGNobyB04bqldCBj4bqjIGPDoWMgbG9nZ2VyIGhp4buHbiBjw7MKICAgIHNldF9hbGxfbG9nZ2Vyc19sZXZlbChsZXZlbCkKICAgIAogICAgIyDEkOG6t3QgbG9nX3RvX2ZpbGUgY2hvIGxvZ2dlciBoaeG7h24gY8OzCiAgICBpZiBsb2dfdG9fZmlsZToKICAgICAgICBmb3IgbG9nZ2VyX25hbWUsIGxvZ2dlcl9pbnN0YW5jZSBpbiBhbGxfbG9nZ2Vycy5pdGVtcygpOgogICAgICAgICAgICAjIFThuqFvIGZpbGUgbG9nIG3hu5tpIG7hur91IGNoxrBhIGPDswogICAgICAgICAgICBpZiBub3QgbG9nZ2VyX2luc3RhbmNlLmxvZ190b19maWxlOgogICAgICAgICAgICAgICAgbG9nZ2VyX2luc3RhbmNlLmxvZ190b19maWxlID0gVHJ1ZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIFThuqFvIHRoxrAgbeG7pWMgbG9nIG7hur91IGPhuqduCiAgICAgICAgICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMobG9nZ2VyX2luc3RhbmNlLmxvZ19kaXIpOgogICAgICAgICAgICAgICAgICAgIG9zLm1ha2VkaXJzKGxvZ2dlcl9pbnN0YW5jZS5sb2dfZGlyKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIFThuqFvIHTDqm4gZmlsZSBsb2cgduG7m2kgbmfDoHkgdGjDoW5nCiAgICAgICAgICAgICAgICB0b2RheSA9IGRhdGV0aW1lLmRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlWS0lbS0lZCIpCiAgICAgICAgICAgICAgICBsb2dfZmlsZW5hbWUgPSBmIntsb2dnZXJfbmFtZX1fe3RvZGF5fS5sb2ciCiAgICAgICAgICAgICAgICBsb2dnZXJfaW5zdGFuY2UubG9nX2ZpbGUgPSBvcy5wYXRoLmpvaW4obG9nZ2VyX2luc3RhbmNlLmxvZ19kaXIsIGxvZ19maWxlbmFtZSkKCmRlZiBnZXRfbG9nZ2VyKG5hbWU6IHN0ciwgbGV2ZWw6IGludCA9IExvZ0xldmVsLkRFQlVHLCBsb2dfdG9fZmlsZTogYm9vbCA9IEZhbHNlKSAtPiBMb2dnZXI6CiAgICAiIiIKICAgIFThuqFvIHbDoCB0cuG6oyB24buBIG3hu5l0IGxvZ2dlciB24bubaSBj4bqldSBow6xuaCBjaOG7iSDEkeG7i25oCiAgICAKICAgIEFyZ3M6CiAgICAgICAgbmFtZTogVMOqbiBj4bunYSBsb2dnZXIvbW9kdWxlCiAgICAgICAgbGV2ZWw6IEPhuqVwIMSR4buZIGxvZyB04buRaSB0aGnhu4N1CiAgICAgICAgbG9nX3RvX2ZpbGU6IFRydWUgxJHhu4MgZ2hpIGxvZyByYSBmaWxlCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgTG9nZ2VyOiDEkOG7kWkgdMaw4bujbmcgbG9nZ2VyIMSRw6MgY+G6pXUgaMOsbmgKICAgICIiIgogICAgIyBLaeG7g20gdHJhIHhlbSBsb2dnZXIgxJHDoyB04buTbiB04bqhaSBjaMawYQogICAgaWYgbmFtZSBpbiBhbGxfbG9nZ2VyczoKICAgICAgICByZXR1cm4gYWxsX2xvZ2dlcnNbbmFtZV0KICAgICAgICAKICAgICMgVOG6oW8gbG9nZ2VyIG3hu5tpCiAgICByZXR1cm4gTG9nZ2VyKG5hbWUpCgpkZWYgY2hlY2tfaGVscGVyX3NlcnZpY2UoaGVscGVyX3NlcnZpY2UpOgogICAgIiIiCiAgICBLaeG7g20gdHJhIEhlbHBlclNlcnZpY2UgY8OzIGhv4bqhdCDEkeG7mW5nIGtow7RuZwogICAgCiAgICBSZXR1cm5zOgogICAgICAgIFR1cGxlW2Jvb2wsIEFueV06IChUcnVlL0ZhbHNlLCByZXNwb25zZSBkYXRhIG7hur91IGPDsykKICAgICIiIgogICAgZ2xvYmFsIGhlbHBlcl9hdmFpbGFibGUKICAgIAogICAgdHJ5OgogICAgICAgICMgS2nhu4NtIHRyYSBi4bqxbmcgY8OhY2ggZ+G7jWkgZ2V0X2RldmljZV9pbmZvCiAgICAgICAgcmVzcG9uc2UgPSBoZWxwZXJfc2VydmljZS5nZXRfZGV2aWNlX2luZm8oKQogICAgICAgIAogICAgICAgIGlmIHJlc3BvbnNlWyJzdGF0dXMiXSA9PSAic3VjY2VzcyI6CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCJIZWxwZXJTZXJ2aWNlIMSRYW5nIGhv4bqhdCDEkeG7mW5nIikKICAgICAgICAgICAgaGVscGVyX2F2YWlsYWJsZSA9IFRydWUKICAgICAgICAgICAgCiAgICAgICAgICAgICMgVHLhuqMgduG7gSB0aMO0bmcgdGluIHRoaeG6v3QgYuG7iyDEkeG7gyBjw7MgdGjhu4MgbMawdSB2w6BvIERCCiAgICAgICAgICAgIGlmICJkYXRhIiBpbiByZXNwb25zZToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlLCByZXNwb25zZQogICAgICAgICAgICByZXR1cm4gVHJ1ZSwgTm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIkhlbHBlclNlcnZpY2UgdHLhuqMgduG7gSBs4buXaToge3Jlc3BvbnNlLmdldCgnbWVzc2FnZScsICdLaMO0bmcgcsO1IGzhu5dpJyl9IikKICAgICAgICAgICAgaGVscGVyX2F2YWlsYWJsZSA9IEZhbHNlCiAgICAgICAgICAgIHJldHVybiBGYWxzZSwgTm9uZQogICAgICAgICAgICAKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBsb2dnZXIuZXJyb3IoZiJM4buXaSBraGkga2nhu4NtIHRyYSBIZWxwZXJTZXJ2aWNlOiB7ZX0iKQogICAgICAgIGhlbHBlcl9hdmFpbGFibGUgPSBGYWxzZQogICAgICAgIHJldHVybiBGYWxzZSwgTm9uZQoKZGVmIGNoZWNrX25ldHdvcmtfY29ubmVjdGlvbigpOgogICAgIiIiCiAgICBLaeG7g20gdHJhIGvhur90IG7hu5FpIG3huqFuZyB2w6AgY2xvdWQgc2VydmVyCiAgICAKICAgIFJldHVybnM6CiAgICAgICAgVHVwbGVbYm9vbCwgQW55XTogKFRydWUvRmFsc2UsIHJlc3BvbnNlIGRhdGEgbuG6v3UgY8OzKQogICAgIiIiCiAgICBnbG9iYWwgbmV0d29ya19hdmFpbGFibGUKICAgIAogICAgdHJ5OgogICAgICAgICMgS2nhu4NtIHRyYSBr4bq/dCBu4buRaSDEkeG6v24gY2xvdWQgVVJMIChraMO0bmcgdGjDqm0gL3BpbmcgbuG7r2EpCiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoY29uZmlnLkNMT1VEX1VSTCwgdGltZW91dD01KQogICAgICAgIAogICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgbG9nZ2VyLmluZm8oIkvhur90IG7hu5FpIG3huqFuZyDhu5VuIMSR4buLbmgiKQogICAgICAgICAgICBuZXR3b3JrX2F2YWlsYWJsZSA9IFRydWUKICAgICAgICAgICAgcmV0dXJuIFRydWUsIHJlc3BvbnNlLmpzb24oKSBpZiByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgPT0gJ2FwcGxpY2F0aW9uL2pzb24nIGVsc2UgTm9uZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIktow7RuZyB0aOG7gyBr4bq/dCBu4buRaSDEkeG6v24gY2xvdWQgc2VydmVyOiB7cmVzcG9uc2Uuc3RhdHVzX2NvZGV9IikKICAgICAgICAgICAgbmV0d29ya19hdmFpbGFibGUgPSBGYWxzZQogICAgICAgICAgICByZXR1cm4gRmFsc2UsIE5vbmUKICAgICAgICAgICAgCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5SZXF1ZXN0RXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nZ2VyLmVycm9yKGYiTOG7l2kga+G6v3QgbuG7kWkgbeG6oW5nOiB7ZX0iKQogICAgICAgIG5ldHdvcmtfYXZhaWxhYmxlID0gRmFsc2UKICAgICAgICByZXR1cm4gRmFsc2UsIE5vbmUKCmRlZiBpc19oZWxwZXJfYXZhaWxhYmxlKCkgLT4gYm9vbDoKICAgICIiIlRy4bqjIHbhu4EgdHLhuqFuZyB0aMOhaSBoaeG7h24gdOG6oWkgY+G7p2EgaGVscGVyIHNlcnZpY2UiIiIKICAgIHJldHVybiBoZWxwZXJfYXZhaWxhYmxlCgpkZWYgaXNfbmV0d29ya19hdmFpbGFibGUoKSAtPiBib29sOgogICAgIiIiVHLhuqMgduG7gSB0cuG6oW5nIHRow6FpIGhp4buHbiB04bqhaSBj4bunYSBr4bq/dCBu4buRaSBt4bqhbmciIiIKICAgIHJldHVybiBuZXR3b3JrX2F2YWlsYWJsZQoKZGVmIHJldHJ5X3VudGlsX3N1Y2Nlc3MoZnVuYywgbWF4X3JldHJpZXM6IGludCwgZGVsYXk6IGludCwgKmFyZ3MsICoqa3dhcmdzKSAtPiBUdXBsZVtib29sLCBPcHRpb25hbFtBbnldXToKICAgICIiIgogICAgVGjhu60gdGjhu7FjIGhp4buHbiBt4buZdCBow6BtIG5oaeG7gXUgbOG6p24gY2hvIMSR4bq/biBraGkgdGjDoG5oIGPDtG5nCiAgICAKICAgIEFyZ3M6CiAgICAgICAgZnVuYzogSMOgbSBj4bqnbiB0aOG7sWMgaGnhu4duCiAgICAgICAgbWF4X3JldHJpZXM6IFPhu5EgbOG6p24gdGjhu60gdOG7kWkgxJFhCiAgICAgICAgZGVsYXk6IFRo4budaSBnaWFuIGNo4budIGdp4buvYSBjw6FjIGzhuqduIHRo4butIChnacOieSkKICAgICAgICAqYXJncywgKiprd2FyZ3M6IFRoYW0gc+G7kSBjaG8gaMOgbSBj4bqnbiB0aOG7sWMgaGnhu4duCiAgICAgICAgCiAgICBSZXR1cm5zOgogICAgICAgIFR1cGxlW2Jvb2wsIEFueV06IChUaMOgbmggY8O0bmcgaGF5IGtow7RuZywgS+G6v3QgcXXhuqMgdHLhuqMgduG7gSBu4bq/dSBjw7MpCiAgICAiIiIKICAgIHJldHJ5X2NvdW50ID0gMAogICAgc3VjY2VzcyA9IEZhbHNlCiAgICByZXN1bHQgPSBOb25lCiAgICAKICAgIHdoaWxlIHJldHJ5X2NvdW50IDwgbWF4X3JldHJpZXMgYW5kIG5vdCBzdWNjZXNzOgogICAgICAgIHN1Y2Nlc3MsIHJlc3VsdCA9IGZ1bmMoKmFyZ3MsICoqa3dhcmdzKQogICAgICAgIGlmIHN1Y2Nlc3M6CiAgICAgICAgICAgIHJldHVybiBUcnVlLCByZXN1bHQKICAgICAgICAgICAgCiAgICAgICAgcmV0cnlfY291bnQgKz0gMQogICAgICAgIGlmIHJldHJ5X2NvdW50IDwgbWF4X3JldHJpZXM6CiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhmIlRo4butIGzhuqFpIHNhdSB7ZGVsYXl9IGdpw6J5Li4uIChjw7JuIHttYXhfcmV0cmllcyAtIHJldHJ5X2NvdW50fSBs4bqnbikiKQogICAgICAgICAgICB0aW1lLnNsZWVwKGRlbGF5KQogICAgCiAgICByZXR1cm4gRmFsc2UsIE5vbmUgCgpkZWYgZ2V0X2RldmljZV9pZF9mcm9tX3N5c3RlbSgpIC0+IHN0cjoKICAgICIiIgogICAgTOG6pXkgZGV2aWNlX2lkIHThu6sgaOG7hyB0aOG7kW5nIGLhurFuZyBs4buHbmggZ2V0cHJvcCByby5zZXJpYWxubwogICAgCiAgICBSZXR1cm5zOgogICAgICAgIHN0cjogRGV2aWNlIElEIGhv4bq3YyBjaHXhu5dpIHLhu5duZyBu4bq/dSBraMO0bmcgbOG6pXkgxJHGsOG7o2MKICAgICIiIgogICAgdHJ5OgogICAgICAgIGltcG9ydCBzdWJwcm9jZXNzCiAgICAgICAgIyBUaOG7sWMgaGnhu4duIGzhu4duaCBnZXRwcm9wIHJvLnNlcmlhbG5vIMSR4buDIGzhuqV5IHNlcmlhbCBudW1iZXIgY+G7p2EgdGhp4bq/dCBi4buLCiAgICAgICAgcmVzdWx0ID0gc3VicHJvY2Vzcy5ydW4oCiAgICAgICAgICAgIFsiZ2V0cHJvcCIsICJyby5zZXJpYWxubyJdLAogICAgICAgICAgICBjaGVjaz1UcnVlLAogICAgICAgICAgICBzdGRvdXQ9c3VicHJvY2Vzcy5QSVBFLAogICAgICAgICAgICBzdGRlcnI9c3VicHJvY2Vzcy5QSVBFLAogICAgICAgICAgICB0ZXh0PVRydWUKICAgICAgICApCiAgICAgICAgCiAgICAgICAgIyBM4bqleSBr4bq/dCBxdeG6oyB2w6AgbG/huqFpIGLhu48ga2hv4bqjbmcgdHLhuq9uZyB0aOG7q2EKICAgICAgICBkZXZpY2VfaWQgPSByZXN1bHQuc3Rkb3V0LnN0cmlwKCkKICAgICAgICAKICAgICAgICBpZiBkZXZpY2VfaWQ6CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGYixJDDoyBs4bqleSDEkcaw4bujYyBkZXZpY2VfaWQgdOG7qyBo4buHIHRo4buRbmc6IHtkZXZpY2VfaWR9IikKICAgICAgICAgICAgcmV0dXJuIGRldmljZV9pZAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKCJLaMO0bmcgbOG6pXkgxJHGsOG7o2MgZGV2aWNlX2lkIHThu6sgaOG7hyB0aOG7kW5nIikKICAgICAgICAgICAgcmV0dXJuICIiCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nZ2VyLmVycm9yKGYiTOG7l2kga2hpIGzhuqV5IGRldmljZV9pZCB04burIGjhu4cgdGjhu5FuZzoge3N0cihlKX0iKQogICAgICAgIHJldHVybiAiIiAKCiMgSMOgbSBraeG7g20gdHJhIGvhur90IG7hu5FpIG3huqFuZwpkZWYgY2hlY2tfbmV0d29ya19jb25uZWN0aW9uKCkgLT4gVHVwbGVbYm9vbCwgc3RyXToKICAgICIiIgogICAgS2nhu4NtIHRyYSBr4bq/dCBu4buRaSBt4bqhbmcgYuG6sW5nIGPDoWNoIHBpbmcgZ29vZ2xlLmNvbQogICAgCiAgICBSZXR1cm5zOgogICAgICAgIFR1cGxlW2Jvb2wsIHN0cl06IChUcnVlLCAiU3VjY2VzcyIpIG7hur91IHRow6BuaCBjw7RuZywgKEZhbHNlLCBlcnJvcl9tZXNzYWdlKSBu4bq/dSB0aOG6pXQgYuG6oWkKICAgICIiIgogICAgdHJ5OgogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL3d3dy5nb29nbGUuY29tIiwgdGltZW91dD01KQogICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICAgICAgcmV0dXJuIFRydWUsICJTdWNjZXNzIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJldHVybiBGYWxzZSwgZiJIVFRQIGVycm9yOiB7cmVzcG9uc2Uuc3RhdHVzX2NvZGV9IgogICAgZXhjZXB0IHJlcXVlc3RzLlJlcXVlc3RFeGNlcHRpb24gYXMgZToKICAgICAgICByZXR1cm4gRmFsc2UsIGYiTmV0d29yayBlcnJvcjoge3N0cihlKX0iCgojIEjDoG0ga2nhu4NtIHRyYSBIZWxwZXJTZXJ2aWNlCmRlZiBjaGVja19oZWxwZXJfc2VydmljZShoZWxwZXIpIC0+IFR1cGxlW2Jvb2wsIE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXV06CiAgICAiIiIKICAgIEtp4buDbSB0cmEga+G6v3QgbuG7kWkgxJHhur9uIEhlbHBlclNlcnZpY2UKICAgIAogICAgQXJnczoKICAgICAgICBoZWxwZXI6IEhlbHBlclNlcnZpY2UgaW5zdGFuY2UKICAgICAgICAKICAgIFJldHVybnM6CiAgICAgICAgVHVwbGVbYm9vbCwgT3B0aW9uYWxbRGljdF1dOiAoVHJ1ZSwgcmVzcG9uc2VfZGF0YSkgbuG6v3UgdGjDoG5oIGPDtG5nLCAoRmFsc2UsIE5vbmUpIG7hur91IHRo4bqldCBi4bqhaQogICAgIiIiCiAgICB0cnk6CiAgICAgICAgIyBH4buNaSBBUEkga2nhu4NtIHRyYQogICAgICAgIHJlc3BvbnNlID0gaGVscGVyLmdldF9kZXZpY2VfaW5mbygpCiAgICAgICAgCiAgICAgICAgIyBLaeG7g20gdHJhIGvhur90IHF14bqjCiAgICAgICAgaWYgcmVzcG9uc2UgYW5kICJzdGF0dXMiIGluIHJlc3BvbnNlIGFuZCByZXNwb25zZVsic3RhdHVzIl0gPT0gInN1Y2Nlc3MiOgogICAgICAgICAgICByZXR1cm4gVHJ1ZSwgcmVzcG9uc2UKICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UsIE5vbmUKICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgcmV0dXJuIEZhbHNlLCBOb25lCgojIEjDoG0ga+G6v3QgbuG7kWkgQURCCmRlZiBjb25uZWN0X2FkYihob3N0OiBzdHIsIHBvcnQ6IGludCkgLT4gYm9vbDoKICAgICIiIgogICAgS+G6v3QgbuG7kWkgxJHhur9uIHRoaeG6v3QgYuG7iyBBbmRyb2lkIHF1YSBBREIKICAgIAogICAgQXJnczoKICAgICAgICBob3N0OiDEkOG7i2EgY2jhu4kgSVAgY+G7p2EgdGhp4bq/dCBi4buLCiAgICAgICAgcG9ydDogUG9ydCBBREIgKHRoxrDhu51uZyBsw6AgNTU1NSkKICAgICAgICAKICAgIFJldHVybnM6CiAgICAgICAgYm9vbDogVHJ1ZSBu4bq/dSBr4bq/dCBu4buRaSB0aMOgbmggY8O0bmcsIEZhbHNlIG7hur91IHRo4bqldCBi4bqhaQogICAgIiIiCiAgICBsb2dnZXIgPSBnZXRfbG9nZ2VyKCJBREIiKQogICAgCiAgICB0cnk6CiAgICAgICAgIyBLaeG7g20gdHJhIEFEQiDEkcOjIMSRxrDhu6NjIGPDoGkgxJHhurd0IGNoxrBhCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzdWJwcm9jZXNzLnJ1bihbImFkYiIsICJ2ZXJzaW9uIl0sIGNoZWNrPVRydWUsIHN0ZG91dD1zdWJwcm9jZXNzLlBJUEUsIHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUpCiAgICAgICAgZXhjZXB0IChzdWJwcm9jZXNzLlN1YnByb2Nlc3NFcnJvciwgRmlsZU5vdEZvdW5kRXJyb3IpOgogICAgICAgICAgICBsb2dnZXIuZXJyb3IoIkFEQiBraMO0bmcgxJHGsOG7o2MgY8OgaSDEkeG6t3QgaG/hurdjIGtow7RuZyBjw7MgdHJvbmcgUEFUSCIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAKICAgICAgICAjIEto4bufaSDEkeG7mW5nIEFEQiBzZXJ2ZXIgbuG6v3UgY2jGsGEgY2jhuqF5CiAgICAgICAgc3VicHJvY2Vzcy5ydW4oWyJhZGIiLCAic3RhcnQtc2VydmVyIl0sIGNoZWNrPUZhbHNlLCBzdGRvdXQ9c3VicHJvY2Vzcy5QSVBFLCBzdGRlcnI9c3VicHJvY2Vzcy5QSVBFKQogICAgICAgIAogICAgICAgICMgS+G6v3QgbuG7kWkgxJHhur9uIHRoaeG6v3QgYuG7iwogICAgICAgIGNvbm5lY3RfY21kID0gWyJhZGIiLCAiY29ubmVjdCIsIGYie2hvc3R9Ontwb3J0fSJdCiAgICAgICAgcmVzdWx0ID0gc3VicHJvY2Vzcy5ydW4oY29ubmVjdF9jbWQsIGNoZWNrPUZhbHNlLCBzdGRvdXQ9c3VicHJvY2Vzcy5QSVBFLCBzdGRlcnI9c3VicHJvY2Vzcy5QSVBFLCB0ZXh0PVRydWUpCiAgICAgICAgCiAgICAgICAgIyBLaeG7g20gdHJhIGvhur90IHF14bqjCiAgICAgICAgb3V0cHV0ID0gcmVzdWx0LnN0ZG91dAogICAgICAgIGlmICJjb25uZWN0ZWQiIGluIG91dHB1dC5sb3dlcigpIGFuZCAidW5hYmxlIiBub3QgaW4gb3V0cHV0Lmxvd2VyKCk6CiAgICAgICAgICAgIGxvZ2dlci5pbmZvKGYixJDDoyBr4bq/dCBu4buRaSB0aMOgbmggY8O0bmcgxJHhur9uIHtob3N0fTp7cG9ydH0iKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIktow7RuZyB0aOG7gyBr4bq/dCBu4buRaSDEkeG6v24ge2hvc3R9Ontwb3J0fToge291dHB1dH0iKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgbG9nZ2VyLmV4Y2VwdGlvbihlLCBmIkzhu5dpIGtoaSBr4bq/dCBu4buRaSBBREIgxJHhur9uIHtob3N0fTp7cG9ydH0iKQogICAgICAgIHJldHVybiBGYWxzZSA=').decode('utf-8'))
